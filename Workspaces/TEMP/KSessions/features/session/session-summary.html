<div class="modern-session-summary-container">
    <div class="container-fluid">
        <!-- Modern Summary Content -->
        <div class="row summary-content-spacing">
            <div class="col-12">
                <div class="modern-summary-container">

                    <!-- Session Summary Cards -->
                    <div class="summary-cards-container">
                        <div class="ccard summary-individual-card session-summary-card"
                             data-ng-repeat="summary in vm.currentSession.summary | orderObjectBy:'sequence': false"
                             data-ng-class="{
                                'summary-card-expanded': summary.isExpanded,
                                'summary-card-inactive': !summary.isActive && g.member.isAdmin,
                                'summary-card-hidden': !summary.isActive && !g.member.isAdmin
                             }"
                             data-ng-if="summary.isActive || g.member.isAdmin">

                            <!-- Inactive Warning for Admin Users -->
                            <div class="inactive-warning-banner" data-ng-if="!summary.isActive && g.member.isAdmin">
                                <i class="fas fa-exclamation-triangle"></i>
                                <span>INACTIVE CONTENT - Visible to admins only</span>
                            </div>

                            <!-- Summary Card Header -->
                            <div class="card-header summary-individual-header"
                                 data-ng-click="vm.onSummaryClick(summary)"
                                 role="button"
                                 tabindex="0"
                                 aria-expanded="{{summary.isExpanded}}"
                                 aria-controls="summary-content-{{summary.id}}"
                                 data-ng-keydown="($event.keyCode === 13 || $event.keyCode === 32) && vm.onSummaryClick(summary)"
                                 title="Click to expand {{summary.title}}">

                                <div class="summary-header-content">
                                    <div class="summary-icon-container">
                                        <div class="summary-icon" aria-hidden="true">
                                            <i class="fas" data-ng-class="{
                                                'fa-lock': summary.isPreviliged,
                                                'fa-microphone': summary.jumpLocation && !summary.isPreviliged,
                                                'fa-microphone-slash': !summary.jumpLocation && !summary.isPreviliged,
                                                'fa-eye-slash': !summary.isActive && g.member.isAdmin
                                            }"></i>
                                        </div>
                                    </div>

                                    <div class="summary-title-content">
                                        <h3 class="card-title summary-individual-title">
                                            {{summary.title}}
                                            <span class="inactive-badge" data-ng-if="!summary.isActive && g.member.isAdmin">INACTIVE</span>
                                        </h3>
                                    </div>
                                </div>

                                <div class="card-toolbar no-border">
                                    <!-- Expansion chevron -->
                                    <i class="card-toolbar-btn summary-chevron fa"
                                       data-ng-class="{'fa-chevron-down': !summary.isExpanded, 'fa-chevron-up': summary.isExpanded}"></i>
                                </div>
                            </div>

                            <!-- Summary Content (Expandable) -->
                            <div class="card-body summary-individual-content"
                                 data-ng-if="summary.isExpanded"
                                 id="summary-content-{{summary.id}}">

                                <!-- Control Buttons -->
                                <div class="summary-control-bar">
                                    <button class="bcard modern-btn-play"
                                            data-ng-disabled="!vm.isMediaReadyToPlay || !summary.jumpLocation || (!summary.isActive && !g.member.isAdmin)"
                                            data-ng-click="vm.jumpTo(summary.jumpLocation)"
                                            title="{{!summary.isActive && !g.member.isAdmin ? 'Content is inactive' : 'Play this section'}}">
                                        <i class="fas fa-play-circle" aria-hidden="true"></i>
                                        <span>Play This Section</span>
                                    </button>

                                    <button class="bcard modern-btn-edit"
                                            data-ng-if="g.member.isAdmin"
                                            data-ng-click="vm.editSummary(summary)"
                                            title="Edit this summary">
                                        <i class="fas fa-edit" aria-hidden="true"></i>
                                        <span>Edit</span>
                                    </button>

                                    <!-- Admin Status Toggle -->
                                    <button class="bcard modern-btn-toggle"
                                            data-ng-if="g.member.isAdmin"
                                            data-ng-click="vm.toggleSummaryActive(summary)"
                                            data-ng-class="{'btn-activate': !summary.isActive, 'btn-deactivate': summary.isActive}"
                                            title="{{summary.isActive ? 'Deactivate this summary' : 'Activate this summary'}}">
                                        <i class="fas" data-ng-class="{'fa-eye': !summary.isActive, 'fa-eye-slash': summary.isActive}"></i>
                                        <span>{{summary.isActive ? 'Deactivate' : 'Activate'}}</span>
                                    </button>
                                </div>

                                <!-- Froala Viewer Content -->
                                <div class="summary-content-body">
                                    <div class="fr-view summary-view-mode"
                                         data-froala-view="summary.content">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>