<!-- Etymology Management Panel - Enhanced Beautiful Design -->
<div class="etymology-management-panel" 
     data-ng-show="vm.isVisible"
     style="position: fixed; 
            top: 50%; 
            left: 50%; 
            transform: translate(-50%, -50%);
            width: 600px; 
            max-width: 90vw;
            max-height: 85vh;
            background: linear-gradient(135deg, #f9fafb 0%, #f3f4f6 100%); 
            border: 2px solid #e5e7eb; 
            border-radius: 16px; 
            padding: 24px;
            z-index: 99999; 
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
            overflow: hidden;
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;">
    <!-- Professional Header -->
    <div style="display: flex; 
                justify-content: space-between; 
                align-items: center; 
                margin-bottom: 24px; 
                background: linear-gradient(135deg, #059669, #10b981); 
                color: white; 
                padding: 20px; 
                margin: -24px -24px 24px -24px; 
                border-radius: 14px 14px 0 0; 
                box-shadow: 0 4px 12px rgba(5,150,105,0.3);">
        <div style="display: flex; align-items: center; gap: 16px;">
            <h4 style="margin: 0; font-weight: 700; font-size: 20px; letter-spacing: -0.025em;">üåø Etymology Search</h4>
            <span style="background: rgba(255,255,255,0.2); 
                         padding: 6px 12px; 
                         border-radius: 16px; 
                         font-size: 12px; 
                         font-weight: 600;">
                {{vm.databaseName || 'ETYMOLOGY_DB'}}
            </span>
        </div>
        <button type="button" 
                data-ng-click="vm.close()" 
                style="background: rgba(239,68,68,0.9); 
                       color: white; 
                       border: none; 
                       padding: 12px 16px; 
                       border-radius: 8px; 
                       cursor: pointer; 
                       font-weight: 600; 
                       font-size: 14px;
                       transition: all 0.2s ease;"
                onmouseover="this.style.background='rgba(239,68,68,1)'; this.style.transform='scale(1.05)'"
                onmouseout="this.style.background='rgba(239,68,68,0.9)'; this.style.transform='scale(1)'">
            ‚úï Close
        </button>
    </div>
    
    <!-- Search Bar Section -->
    <div style="background: white; 
                padding: 20px; 
                border-radius: 12px; 
                margin-bottom: 20px; 
                border: 1px solid #e5e7eb;
                box-shadow: 0 2px 8px rgba(0,0,0,0.04);">
        
        <div style="display: flex; 
                    gap: 12px; 
                    margin-bottom: 16px; 
                    align-items: center;">
            <input type="text" 
                   data-ng-model="vm.searchQuery" 
                   data-ng-model-options="{ debounce: 2000 }"
                   data-ng-change="vm.performSearch()" 
                   placeholder="Search for an Arabic word..."
                   autocomplete="off"
                   style="flex: 1; 
                          padding: 16px 20px; 
                          border: 2px solid #e5e7eb; 
                          border-radius: 12px; 
                          font-size: 16px; 
                          outline: none; 
                          transition: all 0.2s ease;
                          box-sizing: border-box;"
                   onfocus="this.style.borderColor='#10b981'; this.style.boxShadow='0 0 0 3px rgba(16,185,129,0.1)'"
                   onblur="this.style.borderColor='#e5e7eb'; this.style.boxShadow='none'">
            
            <button type="button" 
                    data-ng-click="vm.performSearch()"
                    style="background: linear-gradient(135deg, #10b981, #059669); 
                           color: white; 
                           border: none; 
                           padding: 16px 24px; 
                           border-radius: 12px; 
                           cursor: pointer; 
                           font-size: 16px; 
                           font-weight: 600; 
                           white-space: nowrap;
                           transition: all 0.2s ease;
                           box-shadow: 0 2px 8px rgba(16,185,129,0.3);"
                    onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 12px rgba(16,185,129,0.4)'"
                    onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 8px rgba(16,185,129,0.3)'">
                Search
            </button>
        </div>
    </div>
    
    <!-- Loading State -->
    <div data-ng-if="vm.isLoading" 
         style="text-align: center; 
                padding: 60px 20px; 
                color: #059669;">
        <div style="display: inline-block; 
                    animation: spin 1.5s linear infinite; 
                    font-size: 32px; 
                    margin-bottom: 16px;">üåø</div>
        <div style="font-weight: 600; font-size: 18px; margin-bottom: 8px;">Searching Etymology...</div>
        <div style="font-size: 14px; color: #6b7280;">Please wait while we search the database</div>
    </div>
    
    <!-- Results Container -->
    <div data-ng-if="!vm.isLoading" 
         style="max-height: 500px; 
                overflow-y: auto; 
                padding-right: 8px;">
        
        <!-- Results Count -->
        <div data-ng-if="vm.etymologyList.length > 0"
             style="background: rgba(16,185,129,0.1); 
                    padding: 12px 16px; 
                    border-radius: 8px; 
                    margin-bottom: 16px; 
                    text-align: center; 
                    font-size: 16px; 
                    color: #065f46; 
                    font-weight: 600;
                    border: 1px solid rgba(16,185,129,0.3);">
            üìä Found <strong>{{vm.etymologyList.length || 0}} results</strong>
            <span data-ng-if="vm.searchQuery" style="color: #059669;"> for "{{vm.searchQuery}}"</span>
        </div>
        
        <!-- Empty State -->
        <div data-ng-if="vm.etymologyList.length === 0 && !vm.searchQuery" 
             style="text-align: center; 
                    padding: 60px 20px; 
                    color: #6b7280;">
            <div style="font-size: 72px; margin-bottom: 20px; opacity: 0.3;">üåø</div>
            <div style="font-weight: 600; margin-bottom: 12px; font-size: 20px;">Welcome to Etymology Search</div>
            <div style="font-size: 16px; margin-bottom: 20px; line-height: 1.6;">
                Enter an Arabic word in the search box above to explore its linguistic roots and derivatives.
            </div>
        </div>
        
        <!-- No Results State -->
        <div data-ng-if="vm.etymologyList.length === 0 && vm.searchQuery" 
             style="text-align: center; 
                    padding: 60px 20px; 
                    color: #6b7280;">
            <div style="font-size: 72px; margin-bottom: 20px; opacity: 0.3;">üîç</div>
            <div style="font-weight: 600; margin-bottom: 12px; font-size: 20px;">No Results Found</div>
            <div style="font-size: 16px; margin-bottom: 20px; line-height: 1.6;">
                No etymology data found for "{{vm.searchQuery}}". Try a different Arabic word or root.
            </div>
        </div>
        
        <!-- Etymology Results Cards -->
        <div data-ng-repeat="etymology in vm.etymologyList" 
             style="background: white; 
                    border-radius: 16px; 
                    overflow: hidden; 
                    border: 1px solid #e5e7eb;
                    box-shadow: 0 4px 16px rgba(0,0,0,0.08);
                    margin-bottom: 20px;
                    cursor: pointer;"
             data-ng-click="vm.insertEtymology(etymology)">
            
            <!-- Main Word Display -->
            <div style="background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%); 
                        padding: 24px; 
                        text-align: center; 
                        border-bottom: 1px solid #a7f3d0;">
                <h1 style="margin: 0 0 12px 0; 
                           font-size: 48px; 
                           font-weight: 700; 
                           color: #064e3b;
                           font-family: 'Amiri', serif;
                           line-height: 1.2;">
                    {{etymology.arabicWord}}
                </h1>
                <p style="margin: 0; 
                          font-size: 18px; 
                          color: #065f46; 
                          font-weight: 500; 
                          line-height: 1.5;
                          font-family: 'Lora', serif;">
                    {{etymology.englishMeaning}}
                </p>
                <p style="margin: 8px 0 0 0; 
                          font-size: 14px; 
                          color: #059669; 
                          font-style: italic;">
                    ({{etymology.transliteration}})
                </p>
            </div>
            
            <!-- Root Information -->
            <div style="background: linear-gradient(135deg, #f0fdf4 0%, #ecfdf5 100%); 
                        padding: 20px; 
                        border-bottom: 1px solid #bbf7d0;">
                <h3 style="margin: 0 0 8px 0; 
                           font-size: 18px; 
                           font-weight: 600; 
                           color: #1f2937;">
                    Root: 
                    <span style="font-size: 22px; 
                                 font-weight: 800; 
                                 color: #374151;
                                 font-family: 'Amiri', serif;">
                        {{etymology.root}}
                    </span>
                </h3>
                <p style="margin: 0; 
                          font-size: 16px; 
                          color: #6b7280; 
                          font-weight: 500;">
                    {{etymology.rootMeaning}}
                </p>
            </div>
            
            <!-- Derivatives Preview -->
            <div style="padding: 20px;">
                <h4 style="margin: 0 0 12px 0; 
                           font-size: 16px; 
                           font-weight: 600; 
                           color: #1f2937; 
                           text-align: center;">
                    üìù {{etymology.derivativesCount}} Related Words
                </h4>
                <div style="display: flex; 
                            flex-wrap: wrap; 
                            gap: 8px; 
                            justify-content: center;">
                    <div data-ng-repeat="derivative in etymology.derivatives | limitTo:3"
                         style="background: rgba(16,185,129,0.1); 
                                padding: 8px 12px; 
                                border-radius: 8px; 
                                border: 1px solid rgba(16,185,129,0.2);
                                text-align: center; 
                                min-width: 80px;">
                        <div style="font-size: 16px; 
                                    font-weight: 600; 
                                    color: #1f2937; 
                                    font-family: 'Amiri', serif;">
                            {{derivative.word}}
                        </div>
                        <div style="font-size: 12px; 
                                    color: #6b7280; 
                                    margin-top: 2px;">
                            {{derivative.meaning}}
                        </div>
                    </div>
                    <div data-ng-if="etymology.derivatives.length > 3"
                         style="background: rgba(16,185,129,0.1); 
                                padding: 8px 12px; 
                                border-radius: 8px; 
                                border: 1px solid rgba(16,185,129,0.2);
                                text-align: center; 
                                min-width: 80px;
                                color: #6b7280;
                                font-size: 14px;
                                font-weight: 600;">
                        +{{etymology.derivatives.length - 3}} more
                    </div>
                </div>
                
                <!-- Insert Button -->
                <button style="width: 100%; 
                               margin-top: 16px; 
                               padding: 12px; 
                               background: linear-gradient(135deg, #10b981, #059669); 
                               color: white; 
                               border: none; 
                               border-radius: 8px; 
                               font-size: 16px; 
                               font-weight: 600; 
                               cursor: pointer;"
                        data-ng-click="vm.insertEtymology(etymology); $event.stopPropagation();">
                    üìù Insert Etymology Card
                </button>
            </div>
        </div>
        
        <!-- No Results Message -->
        <div data-ng-if="vm.searchResults && vm.searchResults.length === 0 && !vm.isSearching" 
             style="text-align: center; 
                    color: #6b7280; 
                    padding: 40px 20px; 
                    font-style: italic;">
            üîç No etymologies found. Try different search terms.
        </div>
    </div>
</div>

    </div>
</div>

<!-- CSS for Enhanced Typography and Animations -->
<style>
/* Import beautiful fonts for Arabic and English */
@import url('https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Lora:ital,wght@0,400..700;1,400..700&display=swap');

/* Spinning animation for loading */
@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

/* Enhanced panel styles */
.etymology-management-panel {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;
}

/* Beautiful Arabic font styling */
.etymology-management-panel .arabic-font {
    font-family: 'Amiri', serif !important;
}

.etymology-management-panel .elegant-font {
    font-family: 'Lora', serif !important;
}

/* Enhanced scrollbar styling */
.etymology-management-panel ::-webkit-scrollbar {
    width: 8px;
}

.etymology-management-panel ::-webkit-scrollbar-track {
    background: rgba(229,231,235,0.5);
    border-radius: 4px;
}

.etymology-management-panel ::-webkit-scrollbar-thumb {
    background: linear-gradient(135deg, #10b981, #059669);
    border-radius: 4px;
}

.etymology-management-panel ::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(135deg, #047857, #065f46);
}

/* Input focus enhancement */
.etymology-management-panel input:focus {
    border-color: #10b981 !important;
    box-shadow: 0 0 0 3px rgba(16,185,129,0.1) !important;
    outline: none;
}

/* Button hover effects */
.etymology-management-panel button:hover {
    transform: translateY(-2px) !important;
}

/* Smooth transitions */
.etymology-management-panel * {
    transition: all 0.2s ease;
}

/* Responsive design */
@media (max-width: 768px) {
    .etymology-management-panel {
        width: 95% !important;
        max-width: 95% !important;
        left: 2.5% !important;
        right: auto !important;
        top: 10px !important;
        max-height: 90vh !important;
        padding: 16px !important;
    }
}

/* Print styles */
@media print {
    .etymology-management-panel {
        display: none !important;
    }
}

/* High contrast mode support */
@media (prefers-contrast: high) {
    .etymology-management-panel {
        border-width: 3px !important;
    }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
    .etymology-management-panel,
    .etymology-management-panel *,
    .etymology-management-panel *::before,
    .etymology-management-panel *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
</style>
