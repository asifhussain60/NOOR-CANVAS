<div data-ng-controller="adminEtymologyCtl as vm" class="admin-etymology-container">

    <!-- Etymology Management Panel (Floating) -->
    <div class="etymology-management-panel" data-ng-show="vm.isVisible">
        
        <!-- Professional Header -->
        <div class="etymology-panel-header">
            <div style="display: flex; align-items: center; gap: 16px;">
                <h4>🌿 Etymology Search</h4>
                <span class="database-badge">KQUR_DEV</span>
            </div>
            <button type="button" class="etymology-panel-close-btn" data-ng-click="vm.close()">
                ✕ Close
            </button>
        </div>
        
        <!-- Search Bar Section -->
        <div class="etymology-panel-search-section">
            <div class="etymology-panel-search-container">
                <input type="text" 
                       class="etymology-panel-search-input"
                       data-ng-model="vm.searchQuery"
                       data-ng-model-options="{ debounce: 2000 }"
                       data-ng-change="vm.performSearch()"
                       placeholder="Search for root, derivative, or meaning (English or Arabic)..."
                       autofocus>
                <button type="button" 
                        class="etymology-panel-search-btn" 
                        data-ng-click="vm.performSearch()"
                        data-ng-disabled="vm.isLoading">
                    🔍 Search
                </button>
            </div>
        </div>
        
        <!-- Loading State -->
        <div data-ng-if="vm.isLoading" class="etymology-panel-loading">
            <div class="etymology-panel-loading-icon">🌿</div>
            <div class="etymology-panel-loading-title">Searching Etymology...</div>
            <div class="etymology-panel-loading-subtitle">Please wait while we search the KQUR_DEV database</div>
        </div>
        
        <!-- Results Container -->
        <div data-ng-if="!vm.isLoading" class="etymology-panel-results">
            
            <!-- Results Count -->
            <div data-ng-if="vm.etymologyList.length > 0" class="etymology-panel-results-count">
                📊 Found {{ vm.etymologyList.length }} result(s) for "{{ vm.searchQuery }}"
            </div>
            
            <!-- Empty State -->
            <div data-ng-if="vm.etymologyList.length === 0 && !vm.searchQuery" class="etymology-panel-empty-state">
                <div class="etymology-panel-empty-state-icon">🔍</div>
                <div class="etymology-panel-empty-state-title">Start Your Etymology Journey</div>
                <div class="etymology-panel-empty-state-subtitle">
                    Enter a root word, derivative, or meaning in the search box above.<br>
                    Try searching for: <strong>ا-ل-ه</strong>, <strong>س-ل-م</strong>, or <strong>peace</strong>
                </div>
            </div>
            
            <!-- No Results State -->
            <div data-ng-if="vm.etymologyList.length === 0 && vm.searchQuery" class="etymology-panel-no-results">
                <div class="etymology-panel-no-results-icon">❌</div>
                <div class="etymology-panel-no-results-title">No Results Found</div>
                <div class="etymology-panel-no-results-subtitle">
                    No etymology data found for "{{ vm.searchQuery }}".<br>
                    Try different search terms or check your spelling.
                </div>
            </div>
            
            <!-- Etymology Results Cards -->
            <div data-ng-repeat="etymology in vm.etymologyList track by etymology.rootId" class="etymology-panel-card">
                
                <!-- Card Header - Root Information -->
                <div class="etymology-panel-card-header">
                    <h1 class="etymology-panel-root-word etymology-panel-arabic-font">{{ etymology.rootArabic }}</h1>
                    <p class="etymology-panel-root-meaning etymology-panel-elegant-font">{{ etymology.rootMeaning }}</p>
                </div>
                
                <!-- Card Content - Derivatives -->
                <div class="etymology-panel-card-content">
                    <h3 class="etymology-panel-derivatives-title">Derivatives ({{ etymology.derivatives.length }})</h3>
                    
                    <div class="etymology-panel-derivatives-grid">
                        <div data-ng-repeat="derivative in etymology.derivatives track by derivative.derivativeId"
                             data-ng-click="vm.insertEtymology(derivative)"
                             class="etymology-panel-derivative-tile">
                            <span class="etymology-panel-derivative-word etymology-panel-arabic-font">{{ derivative.arabicWord }}</span>
                            <p class="etymology-panel-derivative-transliteration">({{ derivative.transliteration }})</p>
                            <p class="etymology-panel-derivative-meaning etymology-panel-elegant-font">{{ derivative.meaning }}</p>
                        </div>
                    </div>
                    
                    <!-- Insert Full Etymology Card Button -->
                    <button type="button" 
                            class="etymology-panel-insert-btn"
                            data-ng-click="vm.insertEtymology(etymology)">
                        📑 Insert Complete Etymology Card
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Admin Etymology Page -->
    <div class="container" data-ng-show="vm.viewReady">

        <div data-zu-blank-row data-repeat="1"></div>

        <div class="row">
            <div class="col-md-offset-1 col-md-8">
                <div class="md-card">
                    <div class="md-card-content">

                        <!-- Main Etymology Management Interface -->
                        <div data-zu-hub-etymology-manager=""
                             data-show-publish="false"
                             data-is-signalr="false"
                             data-enhanced-mode="true"></div>

                    </div>
                </div>
            </div>
        </div>

        <div data-zu-blank-row data-repeat="1"></div>

    </div>

</div>