<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>

  <head>
    <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
      <title>Production Setup Guide | NOOR CANVAS Documentation </title>
      <meta name="viewport" content="width=device-width">
      <meta name="title" content="Production Setup Guide | NOOR CANVAS Documentation ">
    
    
      <link rel="shortcut icon" href="../../favicon.ico">
      <link rel="stylesheet" href="../../styles/docfx.vendor.min.css">
      <link rel="stylesheet" href="../../styles/docfx.css">
      <link rel="stylesheet" href="../../styles/main.css">
      <meta property="docfx:navrel" content="../../toc.html">
      <meta property="docfx:tocrel" content="toc.html">
    
    <meta property="docfx:rel" content="../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>

        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>

              <a class="navbar-brand" href="../../index.html">
                <img id="logo" class="svg" src="../../logo.svg" alt="NOOR CANVAS">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>

        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">

        <div id="search-results">
          <div class="search-list">Search Results for <span></span></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination" data-first=First data-prev=Previous data-next=Next data-last=Last></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">

        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="production-setup-guide">Production Setup Guide</h1>

<p>Complete guide for deploying NOOR Canvas to production environment.</p>
<h2 id="production-architecture">Production Architecture</h2>
<h3 id="server-requirements">Server Requirements</h3>
<ul>
<li><strong>Operating System</strong>: Windows Server 2019/2022</li>
<li><strong>IIS</strong>: Version 10.0 or later with ASP.NET Core hosting bundle</li>
<li><strong>Database</strong>: SQL Server 2019/2022 (AHHOME server)</li>
<li><strong>.NET Runtime</strong>: .NET 8.0 hosting bundle</li>
<li><strong>SSL Certificate</strong>: Valid SSL certificate for HTTPS</li>
</ul>
<h3 id="database-setup">Database Setup</h3>
<h4 id="production-databases">Production Databases</h4>
<pre><code class="lang-sql">-- Primary application database
Server: AHHOME
Database: KSESSIONS (production)
Schema: canvas (NOOR Canvas tables)

-- Cross-application integration  
Database: KQUR (production)
Schema: dbo (Beautiful Islam integration)
</code></pre>
<h4 id="connection-strings">Connection Strings</h4>
<pre><code class="lang-json">// appsettings.Production.json
{
  &quot;ConnectionStrings&quot;: {
    &quot;DefaultConnection&quot;: &quot;Server=AHHOME;Database=KSESSIONS;User ID=sa;Password=[SECURE];Connection Timeout=3600;TrustServerCertificate=True;Encrypt=False;&quot;,
    &quot;KSessionsDb&quot;: &quot;Server=AHHOME;Database=KSESSIONS;User ID=sa;Password=[SECURE];Connection Timeout=3600;TrustServerCertificate=True;Encrypt=False;&quot;
  }
}
</code></pre>
<h2 id="iis-configuration">IIS Configuration</h2>
<h3 id="application-pool-setup">Application Pool Setup</h3>
<pre><code class="lang-xml">&lt;!-- Application Pool Configuration --&gt;
&lt;applicationPool name=&quot;NoorCanvasPool&quot;&gt;
    &lt;processModel 
        identityType=&quot;ApplicationPoolIdentity&quot;
        idleTimeout=&quot;00:00:00&quot;
        maxProcesses=&quot;1&quot; /&gt;
    &lt;recycling&gt;
        &lt;periodicRestart time=&quot;1.00:00:00&quot; /&gt;
    &lt;/recycling&gt;
&lt;/applicationPool&gt;
</code></pre>
<h3 id="site-configuration">Site Configuration</h3>
<pre><code class="lang-xml">&lt;!-- IIS Site Configuration --&gt;
&lt;site name=&quot;NOOR Canvas Production&quot; id=&quot;1&quot;&gt;
    &lt;application path=&quot;/&quot; applicationPool=&quot;NoorCanvasPool&quot;&gt;
        &lt;virtualDirectory path=&quot;/&quot; physicalPath=&quot;C:\inetpub\wwwroot\NoorCanvas&quot; /&gt;
    &lt;/application&gt;
    &lt;bindings&gt;
        &lt;binding protocol=&quot;https&quot; bindingInformation=&quot;*:443:&quot; sslFlags=&quot;0&quot; /&gt;
        &lt;binding protocol=&quot;http&quot; bindingInformation=&quot;*:80:&quot; /&gt;
    &lt;/bindings&gt;
&lt;/site&gt;
</code></pre>
<h2 id="deployment-process">Deployment Process</h2>
<h3 id="1-build-for-production">1. Build for Production</h3>
<pre><code class="lang-powershell"># Clean and build for production
dotnet clean
dotnet publish -c Release -r win-x64 --self-contained false -o &quot;./publish&quot;
</code></pre>
<h3 id="2-database-migration">2. Database Migration</h3>
<pre><code class="lang-powershell"># Run Entity Framework migrations
dotnet ef database update --context CanvasDbContext --connection &quot;Server=AHHOME;Database=KSESSIONS;...&quot;
</code></pre>
<h3 id="3-file-deployment">3. File Deployment</h3>
<pre><code class="lang-powershell"># Copy files to production server
Copy-Item &quot;publish/*&quot; -Destination &quot;\\ProductionServer\C$\inetpub\wwwroot\NoorCanvas\&quot; -Recurse -Force
</code></pre>
<h3 id="4-iis-setup-commands">4. IIS Setup Commands</h3>
<pre><code class="lang-powershell"># Import IIS module and configure
Import-Module IISAdministration

# Create application pool
New-IISAppPool -Name &quot;NoorCanvasPool&quot;
Set-IISAppPool -Name &quot;NoorCanvasPool&quot; -ProcessModel @{identityType=&quot;ApplicationPoolIdentity&quot;}

# Create website
New-IISSite -Name &quot;NOOR Canvas Production&quot; -PhysicalPath &quot;C:\inetpub\wwwroot\NoorCanvas&quot; -Port 80 -Protocol http
</code></pre>
<h2 id="security-configuration">Security Configuration</h2>
<h3 id="ssl-certificate-setup">SSL Certificate Setup</h3>
<pre><code class="lang-powershell"># Install SSL certificate
Import-PfxCertificate -FilePath &quot;certificate.pfx&quot; -CertStoreLocation Cert:\LocalMachine\My -Password $securePassword

# Bind certificate to site
New-IISSiteBinding -Name &quot;NOOR Canvas Production&quot; -Protocol https -Port 443 -CertificateThumbprint $thumbprint
</code></pre>
<h3 id="firewall-configuration">Firewall Configuration</h3>
<pre><code class="lang-powershell"># Configure Windows Firewall
New-NetFirewallRule -DisplayName &quot;NOOR Canvas HTTP&quot; -Direction Inbound -Protocol TCP -LocalPort 80 -Action Allow
New-NetFirewallRule -DisplayName &quot;NOOR Canvas HTTPS&quot; -Direction Inbound -Protocol TCP -LocalPort 443 -Action Allow
</code></pre>
<h2 id="environment-configuration">Environment Configuration</h2>
<h3 id="production-settings">Production Settings</h3>
<pre><code class="lang-json">// appsettings.Production.json
{
  &quot;Logging&quot;: {
    &quot;LogLevel&quot;: {
      &quot;Default&quot;: &quot;Information&quot;,
      &quot;Microsoft.AspNetCore&quot;: &quot;Warning&quot;
    }
  },
  &quot;SessionSettings&quot;: {
    &quot;DefaultExpirationMinutes&quot;: 60,
    &quot;MaxParticipants&quot;: 100,
    &quot;RequireHostAuthentication&quot;: true
  },
  &quot;SignalR&quot;: {
    &quot;MaxBufferSize&quot;: 32768,
    &quot;KeepAliveInterval&quot;: &quot;00:00:30&quot;
  }
}
</code></pre>
<h3 id="environment-variables">Environment Variables</h3>
<pre><code class="lang-powershell"># Set production environment
[Environment]::SetEnvironmentVariable(&quot;ASPNETCORE_ENVIRONMENT&quot;, &quot;Production&quot;, &quot;Machine&quot;)
[Environment]::SetEnvironmentVariable(&quot;NOOR_CANVAS_ENV&quot;, &quot;Production&quot;, &quot;Machine&quot;)
</code></pre>
<h2 id="performance-optimization">Performance Optimization</h2>
<h3 id="iis-optimization">IIS Optimization</h3>
<pre><code class="lang-xml">&lt;!-- web.config optimizations --&gt;
&lt;system.webServer&gt;
    &lt;httpCompression directory=&quot;%SystemDrive%\inetpub\temp\IIS Temporary Compressed Files&quot;&gt;
        &lt;scheme name=&quot;gzip&quot; dll=&quot;%Windir%\system32\inetsrv\gzip.dll&quot; /&gt;
    &lt;/httpCompression&gt;
    &lt;staticContent&gt;
        &lt;clientCache cacheControlMode=&quot;UseMaxAge&quot; cacheControlMaxAge=&quot;30.00:00:00&quot; /&gt;
    &lt;/staticContent&gt;
&lt;/system.webServer&gt;
</code></pre>
<h3 id="database-optimization">Database Optimization</h3>
<pre><code class="lang-sql">-- Create indexes for performance
CREATE INDEX IX_Sessions_CreatedAt ON canvas.Sessions (created_at DESC);
CREATE INDEX IX_Annotations_SessionId ON canvas.Annotations (session_id);
CREATE INDEX IX_Questions_SessionId ON canvas.Questions (session_id);
</code></pre>
<h2 id="monitoring-and-maintenance">Monitoring and Maintenance</h2>
<h3 id="health-monitoring">Health Monitoring</h3>
<pre><code class="lang-csharp">// Health check endpoint configuration
app.MapHealthChecks(&quot;/healthz&quot;, new HealthCheckOptions
{
    ResponseWriter = UIResponseWriter.WriteHealthCheckUIResponse
});
</code></pre>
<h3 id="log-management">Log Management</h3>
<pre><code class="lang-json">// Serilog configuration for production
{
  &quot;Serilog&quot;: {
    &quot;MinimumLevel&quot;: &quot;Information&quot;,
    &quot;WriteTo&quot;: [
      {
        &quot;Name&quot;: &quot;File&quot;,
        &quot;Args&quot;: {
          &quot;path&quot;: &quot;C:\\Logs\\NoorCanvas\\log-.txt&quot;,
          &quot;rollingInterval&quot;: &quot;Day&quot;,
          &quot;retainedFileCountLimit&quot;: 30
        }
      }
    ]
  }
}
</code></pre>
<h3 id="backup-strategy">Backup Strategy</h3>
<pre><code class="lang-powershell"># Automated backup script
$backupPath = &quot;C:\Backups\NoorCanvas\$(Get-Date -Format 'yyyy-MM-dd')&quot;
sqlcmd -S AHHOME -Q &quot;BACKUP DATABASE KSESSIONS TO DISK = '$backupPath\KSESSIONS.bak'&quot;
</code></pre>
<h2 id="troubleshooting-production-issues">Troubleshooting Production Issues</h2>
<h3 id="common-issues">Common Issues</h3>
<h4 id="application-wont-start">&quot;Application won't start&quot;</h4>
<ol>
<li>Check Event Logs: <code>eventvwr.msc</code></li>
<li>Verify .NET hosting bundle installation</li>
<li>Check application pool identity permissions</li>
<li>Validate connection strings</li>
</ol>
<h4 id="database-connection-issues">&quot;Database connection issues&quot;</h4>
<ol>
<li>Test connection from server: <code>sqlcmd -S AHHOME -U sa</code></li>
<li>Check firewall rules for SQL Server</li>
<li>Verify sa account password</li>
<li>Test network connectivity</li>
</ol>
<h4 id="ssl-certificate-problems">&quot;SSL certificate problems&quot;</h4>
<ol>
<li>Verify certificate installation: <code>Get-ChildItem Cert:\LocalMachine\My</code></li>
<li>Check certificate binding: <code>netsh http show sslcert</code></li>
<li>Validate certificate chain and expiration</li>
</ol>
<h3 id="performance-issues">Performance Issues</h3>
<ol>
<li><strong>High CPU</strong>: Check application pool recycling settings</li>
<li><strong>High Memory</strong>: Monitor memory leaks and optimize garbage collection</li>
<li><strong>Slow Database</strong>: Analyze query performance and add indexes</li>
<li><strong>Network Latency</strong>: Optimize SignalR settings and connection management</li>
</ol>
<h2 id="deployment-checklist">Deployment Checklist</h2>
<h3 id="pre-deployment">Pre-Deployment</h3>
<ul>
<li>[ ] Build tests pass in Release configuration</li>
<li>[ ] Database migration scripts prepared</li>
<li>[ ] SSL certificates obtained and validated</li>
<li>[ ] Production server prepared with IIS and .NET hosting bundle</li>
<li>[ ] Backup of existing production database (if applicable)</li>
</ul>
<h3 id="deployment-steps">Deployment Steps</h3>
<ul>
<li>[ ] Stop existing application pool</li>
<li>[ ] Deploy application files</li>
<li>[ ] Run database migrations</li>
<li>[ ] Update configuration files</li>
<li>[ ] Configure IIS bindings and certificates</li>
<li>[ ] Start application pool</li>
<li>[ ] Verify application health endpoint</li>
</ul>
<h3 id="post-deployment">Post-Deployment</h3>
<ul>
<li>[ ] Functional testing on production environment</li>
<li>[ ] SSL certificate validation</li>
<li>[ ] Performance monitoring setup</li>
<li>[ ] Log monitoring configuration</li>
<li>[ ] Backup verification</li>
<li>[ ] Documentation updates</li>
</ul>
<h2 id="rollback-procedures">Rollback Procedures</h2>
<h3 id="application-rollback">Application Rollback</h3>
<pre><code class="lang-powershell"># Stop current version
Stop-IISSite -Name &quot;NOOR Canvas Production&quot;

# Restore previous version
Copy-Item &quot;\\BackupServer\NoorCanvas\Previous\*&quot; -Destination &quot;C:\inetpub\wwwroot\NoorCanvas\&quot; -Recurse -Force

# Start application
Start-IISSite -Name &quot;NOOR Canvas Production&quot;
</code></pre>
<h3 id="database-rollback">Database Rollback</h3>
<pre><code class="lang-sql">-- Restore previous database backup
RESTORE DATABASE KSESSIONS FROM DISK = 'C:\Backups\Previous\KSESSIONS.bak' WITH REPLACE;
</code></pre>
<h2 id="support-and-maintenance">Support and Maintenance</h2>
<h3 id="regular-maintenance-tasks">Regular Maintenance Tasks</h3>
<ul>
<li><strong>Weekly</strong>: Check application logs for errors</li>
<li><strong>Monthly</strong>: Review performance metrics and optimization opportunities</li>
<li><strong>Quarterly</strong>: Update SSL certificates and security patches</li>
<li><strong>Annually</strong>: Review and update backup and disaster recovery procedures</li>
</ul>
<h3 id="emergency-contacts">Emergency Contacts</h3>
<ul>
<li><strong>Database Admin</strong>: [Contact information]</li>
<li><strong>Network Admin</strong>: [Contact information]</li>
<li><strong>Security Team</strong>: [Contact information]</li>
<li><strong>Development Team</strong>: [Contact information]</li>
</ul>
<p><em>This production setup guide is maintained as deployment procedures evolve and improve.</em></p>

</article>
          </div>

          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/asifhussain60/NOOR-CANVAS/blob/master/DocFX/articles/deployment/production-setup.md/#L1" class="contribution-link">Edit this page</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In this article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>

      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
      NOOR CANVAS Islamic Content Sharing Platform
      
          </div>
        </div>
      </footer>
    </div>

    <script type="text/javascript" src="../../styles/docfx.vendor.min.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
