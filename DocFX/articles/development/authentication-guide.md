# Authentication Guide

User guide for NOOR Canvas authentication and session management.

## Overview

NOOR Canvas uses a GUID-based session authentication system designed for Islamic content sharing without traditional user accounts.

## How Authentication Works

### Session-Based Authentication
Instead of username/password, NOOR Canvas uses:
- **Session GUIDs**: Unique identifiers for each session
- **Host Tokens**: Special tokens for session hosts
- **Participant Registration**: Simple name-based registration

### Authentication Flow
```
1. Host creates session with host token
2. Participants join using session GUID
3. System validates tokens and GUIDs
4. Access granted to session resources
```

## For Session Hosts

### Creating a Session
1. **Generate Host Token**
   ```powershell
   nct  # Generates new host token
   ```

2. **Start Application**
   ```powershell
   nc   # Launches with token integration
   ```

3. **Create Session**
   - Navigate to host interface
   - Select content (Album/Category/Session)
   - System generates unique session GUID

### Managing Sessions
- **View Active Sessions**: Check host dashboard
- **End Sessions**: Use session management interface
- **Monitor Participants**: Real-time participant list

## For Participants

### Joining a Session
1. **Get Session GUID**: From session host
2. **Navigate to Application**: https://localhost:9091 (development)
3. **Enter Session Details**:
   - Session GUID
   - Your name
   - Country/City (optional)

### During Sessions
- **View Content**: Islamic content shared by host
- **Add Annotations**: Real-time collaborative annotations
- **Ask Questions**: Submit questions to host
- **Participate**: Engage with other participants

## Security Features

### Session Isolation
- Each session has unique GUID
- Participants can only access their joined sessions
- Host controls session access and content

### Data Protection
- No permanent user accounts required
- Session data expires automatically
- Islamic content access follows proper protocols

### Network Security
- HTTPS encryption for all communications
- SignalR secure WebSocket connections
- SQL Server integrated security

## Authentication Tokens

### Host Tokens (Generated by `nct`)
```
Format: GUID (e.g., 123e4567-e89b-12d3-a456-426614174000)
Purpose: Authorizes session creation
Scope: Host-level permissions
Expiration: Session-based
```

### Session GUIDs (Generated automatically)
```
Format: GUID (e.g., 987fcdeb-51d2-43a1-b456-426614174001)
Purpose: Session identification and access
Scope: Participant-level permissions  
Expiration: Configurable session timeout
```

## Configuration

### Development Settings
```json
// appsettings.Development.json
{
  "SessionSettings": {
    "DefaultExpirationMinutes": 120,
    "MaxParticipants": 50,
    "RequireHostAuthentication": true
  }
}
```

### Production Settings
```json
// appsettings.json
{
  "SessionSettings": {
    "DefaultExpirationMinutes": 60,
    "MaxParticipants": 100,
    "RequireHostAuthentication": true
  }
}
```

## Troubleshooting

### Common Authentication Issues

#### "Invalid Host Token"
**Cause**: Token expired or incorrect
**Solution**:
```powershell
nct  # Generate new token
nc   # Restart with new token
```

#### "Session Not Found"
**Cause**: Invalid GUID or session expired
**Solutions**:
- Verify GUID with session host
- Check if session is still active
- Host may need to recreate session

#### "Connection Refused"
**Cause**: SSL certificate or network issues
**Solutions**:
- Use HTTPS URL: https://localhost:9091
- Check if development server is running
- Verify firewall settings

### Getting Authentication Help

#### For Development
1. Check `nc -Help` for token integration
2. Use `nct` to generate fresh tokens
3. Monitor logs for authentication failures

#### For Users
1. Verify session GUID with host
2. Check network connection
3. Try refreshing the page
4. Contact session host for assistance

## Best Practices

### For Hosts
- Generate fresh tokens for each development session
- Share session GUIDs securely with participants
- Monitor participant list for unauthorized access
- End sessions properly when complete

### For Participants
- Keep session GUID confidential
- Use appropriate names for Islamic content context
- Respect session guidelines and Islamic etiquette
- Log out properly when leaving session

### For Developers
- Test authentication flows regularly
- Monitor token expiration handling
- Validate GUID formats and uniqueness
- Implement proper error handling for auth failures

## Related Documentation

- [Host Authentication Guide](host-authentication-guide.md)
- [SSL Configuration](ssl-configuration-user-guide.md)
- [Getting Started Guide](getting-started-guide.md)
- [Technical: Authentication System](~/articles/technical/authentication-technical-reference.md)

*This authentication guide is updated automatically as authentication features are enhanced.*
