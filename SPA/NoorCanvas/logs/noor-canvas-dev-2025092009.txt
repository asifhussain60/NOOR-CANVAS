[2025-09-20 09:36:36.893 -04:00 INF] Microsoft.Hosting.Lifetime Application is shutting down... {}
[2025-09-20 09:36:36.938 -04:00 DBG] Microsoft.AspNetCore.SignalR.HubConnectionHandler OnConnectedAsync ending. {"EventId":{"Id":6,"Name":"ConnectedEnding"},"TransportConnectionId":"Axdf5lvZ2aLUuOto4Q0QMw","RequestId":"0HNFO8K9H983T:0000000D","RequestPath":"/_blazor","ConnectionId":"0HNFO8K9H983T"}
[2025-09-20 09:36:37.008 -04:00 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware Executed endpoint '/_blazor' {"EventId":{"Id":1,"Name":"ExecutedEndpoint"},"RequestId":"0HNFO8K9H983T:0000000D","RequestPath":"/_blazor","ConnectionId":"0HNFO8K9H983T"}
[2025-09-20 09:36:37.017 -04:00 INF] NoorCanvas.Services.DebugService NOOR_DEBUG: [HTTP_MIDDLEWARE] Request Completed | CorrelationId: 481fd779 | Data: {"StatusCode":200,"ContentType":null,"ContentLength":null,"DurationMs":2424253} {"RequestId":"0HNFO8K9H983T:0000000D","RequestPath":"/_blazor","ConnectionId":"0HNFO8K9H983T"}
[2025-09-20 09:36:37.032 -04:00 INF] NoorCanvas.Services.DebugService NOOR_DEBUG: [PERFORMANCE] CRITICAL SLOW OPERATION: HTTP_CONNECT_/_blazor | Data: {"DurationMs":2424253.5144,"ThresholdMs":5000,"Component":"HTTP_MIDDLEWARE"} {"RequestId":"0HNFO8K9H983T:0000000D","RequestPath":"/_blazor","ConnectionId":"0HNFO8K9H983T"}
[2025-09-20 09:36:37.037 -04:00 INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/2 CONNECT https://localhost:9091/_blazor?id=cgZTo8MdSazRvnblVsdYNg - 200 null null 2424285.8056ms {"EventId":{"Id":2},"RequestId":"0HNFO8K9H983T:0000000D","RequestPath":"/_blazor","ConnectionId":"0HNFO8K9H983T"}
[2025-09-20 09:36:37.046 -04:00 INF] Microsoft.AspNetCore.Server.Kestrel Connection id "0HNFO8K9H983T", Request id "0HNFO8K9H983T:0000000D": the application completed without reading the entire request body. {"EventId":{"Id":32,"Name":"RequestBodyNotEntirelyRead"}}
[2025-09-20 09:37:04.826 -04:00 INF] Program ✅ NOOR-VALIDATION: HttpClient BaseAddress configured: "https://localhost:9091/" {}
[2025-09-20 09:37:06.140 -04:00 INF] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"}}
[2025-09-20 09:37:06.155 -04:00 INF] Program ✅ NOOR-VALIDATION: Canvas database connection verified {}
[2025-09-20 09:37:06.158 -04:00 INF] Program ✅ NOOR-VALIDATION: All critical configurations validated successfully {}
[2025-09-20 09:37:06.212 -04:00 INF] Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager User profile is available. Using 'C:\Users\asifh\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest. {"EventId":{"Id":63,"Name":"UsingProfileAsKeyRepositoryWithDPAPI"}}
[2025-09-20 09:37:06.297 -04:00 DBG] Microsoft.AspNetCore.SignalR.Internal.DefaultHubProtocolResolver Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol. {"EventId":{"Id":1,"Name":"RegisteredSignalRProtocol"}}
[2025-09-20 09:37:06.303 -04:00 DBG] Microsoft.AspNetCore.SignalR.Internal.DefaultHubProtocolResolver Registered SignalR Protocol: blazorpack, implemented by Microsoft.AspNetCore.Components.Server.BlazorPack.BlazorPackHubProtocol. {"EventId":{"Id":1,"Name":"RegisteredSignalRProtocol"}}
[2025-09-20 09:37:06.397 -04:00 INF]  NOOR-STARTUP: NOOR Canvas Phase 1 application starting {}
[2025-09-20 09:37:06.481 -04:00 WRN] Microsoft.AspNetCore.Server.Kestrel Overriding address(es) 'https://localhost:8443, http://localhost:9090'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead. {}
[2025-09-20 09:37:06.511 -04:00 INF] Microsoft.Hosting.Lifetime Now listening on: http://localhost:9090 {"EventId":{"Id":14,"Name":"ListeningOnAddress"}}
[2025-09-20 09:37:06.517 -04:00 INF] Microsoft.Hosting.Lifetime Now listening on: https://localhost:9091 {"EventId":{"Id":14,"Name":"ListeningOnAddress"}}
[2025-09-20 09:37:06.522 -04:00 INF] Microsoft.Hosting.Lifetime Application started. Press Ctrl+C to shut down. {}
[2025-09-20 09:37:06.523 -04:00 INF] Microsoft.Hosting.Lifetime Hosting environment: Development {}
[2025-09-20 09:37:06.525 -04:00 INF] Microsoft.Hosting.Lifetime Content root path: D:\PROJECTS\NOOR CANVAS\SPA\NoorCanvas {}
[2025-09-20 09:37:06.737 -04:00 INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/2 POST https://localhost:9091/_blazor/disconnect - multipart/form-data; boundary=----WebKitFormBoundarymT5uN84ikqFC1WAw 359 {"EventId":{"Id":1},"RequestId":"0HNFO9B59HAC2:00000001","RequestPath":"/_blazor/disconnect","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:06.801 -04:00 INF] NoorCanvas.Services.DebugService NOOR_DEBUG: [HTTP_MIDDLEWARE] Request Started | CorrelationId: 50a14844 | Data: {"Method":"POST","Path":{"Value":"/_blazor/disconnect","HasValue":true},"QueryString":"","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Code/1.104.1 Chrome/138.0.7204.235 Electron/37.3.1 Safari/537.36","RemoteIP":"::1","ContentType":"multipart/form-data; boundary=----WebKitFormBoundarymT5uN84ikqFC1WAw","ContentLength":359} {"RequestId":"0HNFO9B59HAC2:00000001","RequestPath":"/_blazor/disconnect","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:06.809 -04:00 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService CORS policy execution successful. {"EventId":{"Id":4,"Name":"PolicySuccess"},"RequestId":"0HNFO9B59HAC2:00000001","RequestPath":"/_blazor/disconnect","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:06.818 -04:00 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware Executing endpoint 'Blazor disconnect' {"EventId":{"Name":"ExecutingEndpoint"},"RequestId":"0HNFO9B59HAC2:00000001","RequestPath":"/_blazor/disconnect","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:06.834 -04:00 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware Executed endpoint 'Blazor disconnect' {"EventId":{"Id":1,"Name":"ExecutedEndpoint"},"RequestId":"0HNFO9B59HAC2:00000001","RequestPath":"/_blazor/disconnect","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:06.850 -04:00 INF] NoorCanvas.Services.DebugService NOOR_DEBUG: [HTTP_MIDDLEWARE] Request Completed | CorrelationId: 50a14844 | Data: {"StatusCode":200,"ContentType":null,"ContentLength":null,"DurationMs":64} {"RequestId":"0HNFO9B59HAC2:00000001","RequestPath":"/_blazor/disconnect","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:06.865 -04:00 INF] NoorCanvas.Services.DebugService NOOR_DEBUG: [PERFORMANCE] Operation Completed: HTTP_POST_/_blazor/disconnect | Data: {"DurationMs":64.3534,"Component":"HTTP_MIDDLEWARE"} {"RequestId":"0HNFO9B59HAC2:00000001","RequestPath":"/_blazor/disconnect","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:06.872 -04:00 INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/2 POST https://localhost:9091/_blazor/disconnect - 200 0 null 135.4827ms {"EventId":{"Id":2},"RequestId":"0HNFO9B59HAC2:00000001","RequestPath":"/_blazor/disconnect","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:19.393 -04:00 INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/2 GET https://localhost:9091/user/landing/USER212B?id=4cbaadbe-65fd-4826-b0c4-711c20df2414&vscodeBrowserReqId=1758375439385 - null null {"EventId":{"Id":1},"RequestId":"0HNFO9B59HAC2:00000003","RequestPath":"/user/landing/USER212B","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:19.410 -04:00 INF] NoorCanvas.Services.DebugService NOOR_DEBUG: [HTTP_MIDDLEWARE] Request Started | CorrelationId: a08de8ae | Data: {"Method":"GET","Path":{"Value":"/user/landing/USER212B","HasValue":true},"QueryString":"?id=4cbaadbe-65fd-4826-b0c4-711c20df2414\u0026vscodeBrowserReqId=1758375439385","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Code/1.104.1 Chrome/138.0.7204.235 Electron/37.3.1 Safari/537.36","RemoteIP":"::1","ContentType":null,"ContentLength":null} {"RequestId":"0HNFO9B59HAC2:00000003","RequestPath":"/user/landing/USER212B","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:19.417 -04:00 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware Executing endpoint '/_Host' {"EventId":{"Name":"ExecutingEndpoint"},"RequestId":"0HNFO9B59HAC2:00000003","RequestPath":"/user/landing/USER212B","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:19.436 -04:00 INF] Microsoft.AspNetCore.Mvc.RazorPages.Infrastructure.PageActionInvoker Route matched with {page = "/_Host", action = "", controller = ""}. Executing page /_Host {"EventId":{"Id":103,"Name":"PageExecuting"},"ActionId":"20e759ff-9b57-4c25-a497-7da7031cb4ec","ActionName":"/_Host","RequestId":"0HNFO9B59HAC2:00000003","RequestPath":"/user/landing/USER212B","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:19.465 -04:00 INF] Microsoft.AspNetCore.Mvc.RazorPages.Infrastructure.PageActionInvoker Executing an implicit handler method - ModelState is "Valid" {"EventId":{"Id":107,"Name":"ExecutingImplicitHandlerMethod"},"ActionId":"20e759ff-9b57-4c25-a497-7da7031cb4ec","ActionName":"/_Host","RequestId":"0HNFO9B59HAC2:00000003","RequestPath":"/user/landing/USER212B","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:19.476 -04:00 INF] Microsoft.AspNetCore.Mvc.RazorPages.Infrastructure.PageActionInvoker Executed an implicit handler method, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult. {"EventId":{"Id":109,"Name":"ExecutedImplicitHandlerMethod"},"ActionId":"20e759ff-9b57-4c25-a497-7da7031cb4ec","ActionName":"/_Host","RequestId":"0HNFO9B59HAC2:00000003","RequestPath":"/user/landing/USER212B","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:19.550 -04:00 INF] NoorCanvas.Pages.UserLanding NOOR-DEBUG: [a05e97f3] UserLanding OnInitialized - SessionToken: USER212B {"ActionId":"20e759ff-9b57-4c25-a497-7da7031cb4ec","ActionName":"/_Host","RequestPath":"/user/landing/USER212B","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:19.555 -04:00 INF] NoorCanvas.Pages.UserLanding NOOR-DEBUG: [a05e97f3] Loading session info for token: USER212B {"ActionId":"20e759ff-9b57-4c25-a497-7da7031cb4ec","ActionName":"/_Host","RequestPath":"/user/landing/USER212B","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:19.564 -04:00 INF] NoorCanvas.Pages.UserLanding NOOR-DEBUG: [a05e97f3] Calling session validation API for token: USER212B {"ActionId":"20e759ff-9b57-4c25-a497-7da7031cb4ec","ActionName":"/_Host","RequestPath":"/user/landing/USER212B","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:19.573 -04:00 INF] System.Net.Http.HttpClient.Default.LogicalHandler Start processing HTTP request GET https://localhost:9091/api/participant/session/USER212B/validate {"EventId":{"Id":100,"Name":"RequestPipelineStart"},"ActionId":"20e759ff-9b57-4c25-a497-7da7031cb4ec","ActionName":"/_Host","RequestId":"0HNFO9B59HAC2:00000003","RequestPath":"/user/landing/USER212B","ConnectionId":"0HNFO9B59HAC2","Scope":["HTTP GET https://localhost:9091/api/participant/session/USER212B/validate"]}
[2025-09-20 09:37:19.586 -04:00 INF] System.Net.Http.HttpClient.Default.ClientHandler Sending HTTP request GET https://localhost:9091/api/participant/session/USER212B/validate {"EventId":{"Id":100,"Name":"RequestStart"},"ActionId":"20e759ff-9b57-4c25-a497-7da7031cb4ec","ActionName":"/_Host","RequestId":"0HNFO9B59HAC2:00000003","RequestPath":"/user/landing/USER212B","ConnectionId":"0HNFO9B59HAC2","Scope":["HTTP GET https://localhost:9091/api/participant/session/USER212B/validate"]}
[2025-09-20 09:37:19.645 -04:00 INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/1.1 GET https://localhost:9091/api/participant/session/USER212B/validate - null null {"EventId":{"Id":1},"RequestId":"0HNFO9B59HAC4:00000001","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9B59HAC4"}
[2025-09-20 09:37:19.655 -04:00 INF] NoorCanvas.Services.DebugService NOOR_DEBUG: [HTTP_MIDDLEWARE] Request Started | CorrelationId: 9a760198 | Data: {"Method":"GET","Path":{"Value":"/api/participant/session/USER212B/validate","HasValue":true},"QueryString":"","UserAgent":"","RemoteIP":"::1","ContentType":null,"ContentLength":null} {"RequestId":"0HNFO9B59HAC4:00000001","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9B59HAC4"}
[2025-09-20 09:37:19.660 -04:00 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware Executing endpoint 'NoorCanvas.Controllers.ParticipantController.ValidateSessionToken (NoorCanvas)' {"EventId":{"Name":"ExecutingEndpoint"},"RequestId":"0HNFO9B59HAC4:00000001","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9B59HAC4"}
[2025-09-20 09:37:19.678 -04:00 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Route matched with {action = "ValidateSessionToken", controller = "Participant", page = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateSessionToken(System.String) on controller NoorCanvas.Controllers.ParticipantController (NoorCanvas). {"EventId":{"Id":102,"Name":"ControllerActionExecuting"},"ActionId":"b1bd0b53-ca7d-4b62-b5b2-4efe60bc1138","ActionName":"NoorCanvas.Controllers.ParticipantController.ValidateSessionToken (NoorCanvas)","RequestId":"0HNFO9B59HAC4:00000001","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9B59HAC4"}
[2025-09-20 09:37:19.701 -04:00 INF] NoorCanvas.Controllers.ParticipantController NOOR-PARTICIPANT-VALIDATE: [a8e6a5ad] Session validation request started {"ActionId":"b1bd0b53-ca7d-4b62-b5b2-4efe60bc1138","ActionName":"NoorCanvas.Controllers.ParticipantController.ValidateSessionToken (NoorCanvas)","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9B59HAC4"}
[2025-09-20 09:37:19.706 -04:00 INF] NoorCanvas.Controllers.ParticipantController NOOR-PARTICIPANT-VALIDATE: [a8e6a5ad] Token: USER212B, ClientIP: ::1, UserAgent: unknown {"ActionId":"b1bd0b53-ca7d-4b62-b5b2-4efe60bc1138","ActionName":"NoorCanvas.Controllers.ParticipantController.ValidateSessionToken (NoorCanvas)","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9B59HAC4"}
[2025-09-20 09:37:19.713 -04:00 INF] NoorCanvas.Controllers.ParticipantController NOOR-PARTICIPANT-VALIDATE: [a8e6a5ad] Request URL: https://localhost:9091/api/participant/session/USER212B/validate {"ActionId":"b1bd0b53-ca7d-4b62-b5b2-4efe60bc1138","ActionName":"NoorCanvas.Controllers.ParticipantController.ValidateSessionToken (NoorCanvas)","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9B59HAC4"}
[2025-09-20 09:37:19.719 -04:00 INF] NoorCanvas.Controllers.ParticipantController NOOR-PARTICIPANT-VALIDATE: [a8e6a5ad] Calling SimplifiedTokenService.ValidateTokenAsync for USER token {"ActionId":"b1bd0b53-ca7d-4b62-b5b2-4efe60bc1138","ActionName":"NoorCanvas.Controllers.ParticipantController.ValidateSessionToken (NoorCanvas)","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9B59HAC4"}
[2025-09-20 09:37:19.727 -04:00 INF] NoorCanvas.Services.SimplifiedTokenService NOOR-SIMPLIFIED: [fb40b806] Validating USER token: USER212B {"ActionId":"b1bd0b53-ca7d-4b62-b5b2-4efe60bc1138","ActionName":"NoorCanvas.Controllers.ParticipantController.ValidateSessionToken (NoorCanvas)","RequestId":"0HNFO9B59HAC4:00000001","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9B59HAC4"}
[2025-09-20 09:37:20.002 -04:00 INF] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [canvas].[Sessions] AS [s] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"ActionId":"b1bd0b53-ca7d-4b62-b5b2-4efe60bc1138","ActionName":"NoorCanvas.Controllers.ParticipantController.ValidateSessionToken (NoorCanvas)","RequestId":"0HNFO9B59HAC4:00000001","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9B59HAC4"}
[2025-09-20 09:37:20.032 -04:00 INF] NoorCanvas.Services.SimplifiedTokenService NOOR-SIMPLIFIED: [fb40b806] Total sessions in database: 1 {"ActionId":"b1bd0b53-ca7d-4b62-b5b2-4efe60bc1138","ActionName":"NoorCanvas.Controllers.ParticipantController.ValidateSessionToken (NoorCanvas)","RequestId":"0HNFO9B59HAC4:00000001","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9B59HAC4"}
[2025-09-20 09:37:20.110 -04:00 INF] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand (11ms) [Parameters=[@__token_0='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[SessionId], [s].[CreatedAt], [s].[Description], [s].[EndedAt], [s].[ExpiresAt], [s].[GroupId], [s].[HostGuid], [s].[HostToken], [s].[KSessionsId], [s].[MaxParticipants], [s].[ModifiedAt], [s].[ParticipantCount], [s].[StartedAt], [s].[Status], [s].[Title], [s].[TokenAccessCount], [s].[TokenCreatedByIp], [s].[TokenExpiresAt], [s].[TokenLastAccessedAt], [s].[UserToken]
FROM [canvas].[Sessions] AS [s]
WHERE [s].[UserToken] = @__token_0 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"ActionId":"b1bd0b53-ca7d-4b62-b5b2-4efe60bc1138","ActionName":"NoorCanvas.Controllers.ParticipantController.ValidateSessionToken (NoorCanvas)","RequestId":"0HNFO9B59HAC4:00000001","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9B59HAC4"}
[2025-09-20 09:37:20.199 -04:00 INF] NoorCanvas.Services.SimplifiedTokenService NOOR-SIMPLIFIED: [fb40b806] Sessions matching token 'USER212B': 1 {"ActionId":"b1bd0b53-ca7d-4b62-b5b2-4efe60bc1138","ActionName":"NoorCanvas.Controllers.ParticipantController.ValidateSessionToken (NoorCanvas)","RequestId":"0HNFO9B59HAC4:00000001","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9B59HAC4"}
[2025-09-20 09:37:20.208 -04:00 INF] NoorCanvas.Services.SimplifiedTokenService NOOR-SIMPLIFIED: [fb40b806] Matching session - ID: 1, KSessionsId: 212, Status: Active, ExpiresAt: NULL, HostToken: HOST212A, UserToken: USER212B {"ActionId":"b1bd0b53-ca7d-4b62-b5b2-4efe60bc1138","ActionName":"NoorCanvas.Controllers.ParticipantController.ValidateSessionToken (NoorCanvas)","RequestId":"0HNFO9B59HAC4:00000001","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9B59HAC4"}
[2025-09-20 09:37:20.239 -04:00 INF] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand (2ms) [Parameters=[@__token_0='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[SessionId], [s].[CreatedAt], [s].[Description], [s].[EndedAt], [s].[ExpiresAt], [s].[GroupId], [s].[HostGuid], [s].[HostToken], [s].[KSessionsId], [s].[MaxParticipants], [s].[ModifiedAt], [s].[ParticipantCount], [s].[StartedAt], [s].[Status], [s].[Title], [s].[TokenAccessCount], [s].[TokenCreatedByIp], [s].[TokenExpiresAt], [s].[TokenLastAccessedAt], [s].[UserToken]
FROM [canvas].[Sessions] AS [s]
WHERE ([s].[ExpiresAt] IS NULL OR [s].[ExpiresAt] > GETUTCDATE()) AND [s].[Status] <> N'Expired' AND [s].[UserToken] = @__token_0 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"ActionId":"b1bd0b53-ca7d-4b62-b5b2-4efe60bc1138","ActionName":"NoorCanvas.Controllers.ParticipantController.ValidateSessionToken (NoorCanvas)","RequestId":"0HNFO9B59HAC4:00000001","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9B59HAC4"}
[2025-09-20 09:37:20.252 -04:00 INF] NoorCanvas.Services.SimplifiedTokenService NOOR-SIMPLIFIED: [fb40b806] Token validation successful - Session 1 {"ActionId":"b1bd0b53-ca7d-4b62-b5b2-4efe60bc1138","ActionName":"NoorCanvas.Controllers.ParticipantController.ValidateSessionToken (NoorCanvas)","RequestId":"0HNFO9B59HAC4:00000001","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9B59HAC4"}
[2025-09-20 09:37:20.259 -04:00 INF] NoorCanvas.Controllers.ParticipantController NOOR-PARTICIPANT-VALIDATE: [a8e6a5ad] SimplifiedTokenService returned: Session 1 {"ActionId":"b1bd0b53-ca7d-4b62-b5b2-4efe60bc1138","ActionName":"NoorCanvas.Controllers.ParticipantController.ValidateSessionToken (NoorCanvas)","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9B59HAC4"}
[2025-09-20 09:37:20.265 -04:00 INF] NoorCanvas.Controllers.ParticipantController NOOR-PARTICIPANT-VALIDATE: [a8e6a5ad] Session found: SessionId=1, KSessionsId=212, Title=Test Session 212, Status=Active {"ActionId":"b1bd0b53-ca7d-4b62-b5b2-4efe60bc1138","ActionName":"NoorCanvas.Controllers.ParticipantController.ValidateSessionToken (NoorCanvas)","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9B59HAC4"}
[2025-09-20 09:37:20.277 -04:00 INF] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand (2ms) [Parameters=[@__session_SessionId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [canvas].[Participants] AS [p]
WHERE [p].[SessionId] = @__session_SessionId_0 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"ActionId":"b1bd0b53-ca7d-4b62-b5b2-4efe60bc1138","ActionName":"NoorCanvas.Controllers.ParticipantController.ValidateSessionToken (NoorCanvas)","RequestId":"0HNFO9B59HAC4:00000001","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9B59HAC4"}
[2025-09-20 09:37:20.289 -04:00 INF] NoorCanvas.Controllers.ParticipantController NOOR-PARTICIPANT-VALIDATE: [a8e6a5ad] Validation successful! Returning response {"ActionId":"b1bd0b53-ca7d-4b62-b5b2-4efe60bc1138","ActionName":"NoorCanvas.Controllers.ParticipantController.ValidateSessionToken (NoorCanvas)","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9B59HAC4"}
[2025-09-20 09:37:20.295 -04:00 INF] NoorCanvas.Controllers.ParticipantController NOOR-PARTICIPANT-VALIDATE: [a8e6a5ad] Response: Valid=true, SessionId=1, Title=Test Session 212, Status=Active, ExpiresAt=null {"ActionId":"b1bd0b53-ca7d-4b62-b5b2-4efe60bc1138","ActionName":"NoorCanvas.Controllers.ParticipantController.ValidateSessionToken (NoorCanvas)","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9B59HAC4"}
[2025-09-20 09:37:20.306 -04:00 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor Executing OkObjectResult, writing value of type '<>f__AnonymousType41`7[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int64, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType42`10[[System.Int64, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.TimeSpan, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], NoorCanvas, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[<>f__AnonymousType43`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], NoorCanvas, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'. {"EventId":{"Id":1,"Name":"ObjectResultExecuting"},"ActionId":"b1bd0b53-ca7d-4b62-b5b2-4efe60bc1138","ActionName":"NoorCanvas.Controllers.ParticipantController.ValidateSessionToken (NoorCanvas)","RequestId":"0HNFO9B59HAC4:00000001","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9B59HAC4"}
[2025-09-20 09:37:20.342 -04:00 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Executed action NoorCanvas.Controllers.ParticipantController.ValidateSessionToken (NoorCanvas) in 652.3853ms {"EventId":{"Id":105,"Name":"ActionExecuted"},"RequestId":"0HNFO9B59HAC4:00000001","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9B59HAC4"}
[2025-09-20 09:37:20.346 -04:00 INF] System.Net.Http.HttpClient.Default.ClientHandler Received HTTP response headers after 747.5739ms - 200 {"EventId":{"Id":101,"Name":"RequestEnd"},"HttpMethod":"GET","Uri":"https://localhost:9091/api/participant/session/USER212B/validate","ActionId":"20e759ff-9b57-4c25-a497-7da7031cb4ec","ActionName":"/_Host","RequestId":"0HNFO9B59HAC2:00000003","RequestPath":"/user/landing/USER212B","ConnectionId":"0HNFO9B59HAC2","Scope":["HTTP GET https://localhost:9091/api/participant/session/USER212B/validate"]}
[2025-09-20 09:37:20.357 -04:00 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware Executed endpoint 'NoorCanvas.Controllers.ParticipantController.ValidateSessionToken (NoorCanvas)' {"EventId":{"Id":1,"Name":"ExecutedEndpoint"},"RequestId":"0HNFO9B59HAC4:00000001","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9B59HAC4"}
[2025-09-20 09:37:20.363 -04:00 INF] System.Net.Http.HttpClient.Default.LogicalHandler End processing HTTP request after 791.0619ms - 200 {"EventId":{"Id":101,"Name":"RequestPipelineEnd"},"HttpMethod":"GET","Uri":"https://localhost:9091/api/participant/session/USER212B/validate","ActionId":"20e759ff-9b57-4c25-a497-7da7031cb4ec","ActionName":"/_Host","RequestId":"0HNFO9B59HAC2:00000003","RequestPath":"/user/landing/USER212B","ConnectionId":"0HNFO9B59HAC2","Scope":["HTTP GET https://localhost:9091/api/participant/session/USER212B/validate"]}
[2025-09-20 09:37:20.376 -04:00 INF] NoorCanvas.Services.DebugService NOOR_DEBUG: [HTTP_MIDDLEWARE] Request Completed | CorrelationId: 9a760198 | Data: {"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"DurationMs":721} {"RequestId":"0HNFO9B59HAC4:00000001","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9B59HAC4"}
[2025-09-20 09:37:20.388 -04:00 INF] NoorCanvas.Services.DebugService NOOR_DEBUG: [PERFORMANCE] Operation Completed: HTTP_GET_/api/participant/session/USER212B/validate | Data: {"DurationMs":721.6862,"Component":"HTTP_MIDDLEWARE"} {"RequestId":"0HNFO9B59HAC4:00000001","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9B59HAC4"}
[2025-09-20 09:37:20.398 -04:00 INF] NoorCanvas.Pages.UserLanding NOOR-DEBUG: [a05e97f3] Session validation API response: "OK" {"ActionId":"20e759ff-9b57-4c25-a497-7da7031cb4ec","ActionName":"/_Host","RequestPath":"/user/landing/USER212B","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:20.398 -04:00 INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/1.1 GET https://localhost:9091/api/participant/session/USER212B/validate - 200 null application/json; charset=utf-8 753.4462ms {"EventId":{"Id":2},"RequestId":"0HNFO9B59HAC4:00000001","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9B59HAC4"}
[2025-09-20 09:37:20.412 -04:00 INF] NoorCanvas.Pages.UserLanding NOOR-DEBUG: [a05e97f3] Session validation response content: {"valid":true,"sessionId":1,"token":"USER212B","expiresAt":null,"session":{"sessionId":1,"title":"Test Session 212","description":"Test session for registration debugging","status":"Active","participantCount":0,"maxParticipants":null,"startedAt":"2025-09-20T08:30:22.6333333","createdAt":"2025-09-20T08:30:22.6333333","startTime":"2025-09-20T08:35:22.6333333","duration":"01:00:00"},"participant":{"joinUrl":"/session/waiting/USER212B","accessCount":0,"lastAccessedAt":null},"requestId":"a8e6a5ad"} {"ActionId":"20e759ff-9b57-4c25-a497-7da7031cb4ec","ActionName":"/_Host","RequestPath":"/user/landing/USER212B","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:20.434 -04:00 INF] NoorCanvas.Pages.UserLanding NOOR-DEBUG: [a05e97f3] Session validation successful - SessionID: 1, Title: Test Session 212 {"ActionId":"20e759ff-9b57-4c25-a497-7da7031cb4ec","ActionName":"/_Host","RequestPath":"/user/landing/USER212B","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:20.441 -04:00 INF] NoorCanvas.Pages.UserLanding NOOR-DEBUG: [a05e97f3] Updated Model.SessionName to: Test Session 212, SessionDescription to: Status: Active {"ActionId":"20e759ff-9b57-4c25-a497-7da7031cb4ec","ActionName":"/_Host","RequestPath":"/user/landing/USER212B","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:20.448 -04:00 INF] NoorCanvas.Pages.UserLanding NOOR-DEBUG: [a05e97f3] URL token validated successfully - switching to registration panel {"ActionId":"20e759ff-9b57-4c25-a497-7da7031cb4ec","ActionName":"/_Host","RequestPath":"/user/landing/USER212B","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:20.454 -04:00 INF] NoorCanvas.Pages.UserLanding NOOR-DEBUG: [a05e97f3] Loading countries dropdown after URL token validation... {"ActionId":"20e759ff-9b57-4c25-a497-7da7031cb4ec","ActionName":"/_Host","RequestPath":"/user/landing/USER212B","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:20.470 -04:00 INF] NoorCanvas.Pages.UserLanding COPILOT-DEBUG: [6ef5eea9] [COUNTRIES] Loading countries from API... {"ActionId":"20e759ff-9b57-4c25-a497-7da7031cb4ec","ActionName":"/_Host","RequestPath":"/user/landing/USER212B","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:20.477 -04:00 INF] NoorCanvas.Pages.UserLanding COPILOT-DEBUG: [6ef5eea9] [COUNTRIES] GET /api/host/countries?guid=USER212B {"ActionId":"20e759ff-9b57-4c25-a497-7da7031cb4ec","ActionName":"/_Host","RequestPath":"/user/landing/USER212B","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:20.485 -04:00 INF] System.Net.Http.HttpClient.default.LogicalHandler Start processing HTTP request GET https://localhost:9091/api/host/countries?guid=USER212B {"EventId":{"Id":100,"Name":"RequestPipelineStart"},"ActionId":"20e759ff-9b57-4c25-a497-7da7031cb4ec","ActionName":"/_Host","RequestId":"0HNFO9B59HAC2:00000003","RequestPath":"/user/landing/USER212B","ConnectionId":"0HNFO9B59HAC2","Scope":["HTTP GET https://localhost:9091/api/host/countries?guid=USER212B"]}
[2025-09-20 09:37:20.495 -04:00 INF] System.Net.Http.HttpClient.default.ClientHandler Sending HTTP request GET https://localhost:9091/api/host/countries?guid=USER212B {"EventId":{"Id":100,"Name":"RequestStart"},"ActionId":"20e759ff-9b57-4c25-a497-7da7031cb4ec","ActionName":"/_Host","RequestId":"0HNFO9B59HAC2:00000003","RequestPath":"/user/landing/USER212B","ConnectionId":"0HNFO9B59HAC2","Scope":["HTTP GET https://localhost:9091/api/host/countries?guid=USER212B"]}
[2025-09-20 09:37:20.509 -04:00 INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/1.1 GET https://localhost:9091/api/host/countries?guid=USER212B - null null {"EventId":{"Id":1},"RequestId":"0HNFO9B59HAC5:00000001","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9B59HAC5"}
[2025-09-20 09:37:20.519 -04:00 INF] NoorCanvas.Services.DebugService NOOR_DEBUG: [HTTP_MIDDLEWARE] Request Started | CorrelationId: c5ed472f | Data: {"Method":"GET","Path":{"Value":"/api/host/countries","HasValue":true},"QueryString":"?guid=USER212B","UserAgent":"NoorCanvas-BlazorServer","RemoteIP":"::1","ContentType":null,"ContentLength":null} {"RequestId":"0HNFO9B59HAC5:00000001","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9B59HAC5"}
[2025-09-20 09:37:20.524 -04:00 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware Executing endpoint 'NoorCanvas.Controllers.HostController.GetCountries (NoorCanvas)' {"EventId":{"Name":"ExecutingEndpoint"},"RequestId":"0HNFO9B59HAC5:00000001","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9B59HAC5"}
[2025-09-20 09:37:20.535 -04:00 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Route matched with {action = "GetCountries", controller = "Host", page = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCountries(System.String) on controller NoorCanvas.Controllers.HostController (NoorCanvas). {"EventId":{"Id":102,"Name":"ControllerActionExecuting"},"ActionId":"cb357e1f-eb89-42dd-befb-7918cbcfc9be","ActionName":"NoorCanvas.Controllers.HostController.GetCountries (NoorCanvas)","RequestId":"0HNFO9B59HAC5:00000001","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9B59HAC5"}
[2025-09-20 09:37:20.552 -04:00 INF] NoorCanvas.Controllers.HostController COPILOT-DEBUG: [d5645b35] [COUNTRIES-API] Countries request started {"ActionId":"cb357e1f-eb89-42dd-befb-7918cbcfc9be","ActionName":"NoorCanvas.Controllers.HostController.GetCountries (NoorCanvas)","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9B59HAC5"}
[2025-09-20 09:37:20.558 -04:00 INF] NoorCanvas.Controllers.HostController COPILOT-DEBUG: [d5645b35] [COUNTRIES-API] Token: USER212B, ClientIP: ::1, UserAgent: NoorCanvas-BlazorServer {"ActionId":"cb357e1f-eb89-42dd-befb-7918cbcfc9be","ActionName":"NoorCanvas.Controllers.HostController.GetCountries (NoorCanvas)","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9B59HAC5"}
[2025-09-20 09:37:20.566 -04:00 INF] NoorCanvas.Controllers.HostController COPILOT-DEBUG: [d5645b35] [COUNTRIES-API] Executing SQL query against KSESSIONS database {"ActionId":"cb357e1f-eb89-42dd-befb-7918cbcfc9be","ActionName":"NoorCanvas.Controllers.HostController.GetCountries (NoorCanvas)","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9B59HAC5"}
[2025-09-20 09:37:20.700 -04:00 ERR] Microsoft.EntityFrameworkCore.Database.Command Failed executing DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CountryID, CountryName, ISO2, ISO3, CAST(ISNULL(IsActive, 0) AS BIT) AS IsActive FROM dbo.Countries ORDER BY CountryName {"EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"ActionId":"cb357e1f-eb89-42dd-befb-7918cbcfc9be","ActionName":"NoorCanvas.Controllers.HostController.GetCountries (NoorCanvas)","RequestId":"0HNFO9B59HAC5:00000001","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9B59HAC5"}
[2025-09-20 09:37:20.722 -04:00 ERR] Microsoft.EntityFrameworkCore.Query An exception occurred while iterating over the results of a query for context type 'NoorCanvas.Data.KSessionsDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'dbo.Countries'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.FromSqlQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.FromSqlQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:0bd4f02d-2486-412f-8c50-7d46076ba32f
Error Number:208,State:1,Class:16 {"EventId":{"Id":10100,"Name":"Microsoft.EntityFrameworkCore.Query.QueryIterationFailed"},"ActionId":"cb357e1f-eb89-42dd-befb-7918cbcfc9be","ActionName":"NoorCanvas.Controllers.HostController.GetCountries (NoorCanvas)","RequestId":"0HNFO9B59HAC5:00000001","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9B59HAC5"}
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'dbo.Countries'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.FromSqlQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.FromSqlQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:0bd4f02d-2486-412f-8c50-7d46076ba32f
Error Number:208,State:1,Class:16
[2025-09-20 09:37:20.745 -04:00 ERR] NoorCanvas.Controllers.HostController COPILOT-DEBUG: [d5645b35] [COUNTRIES-API] EXCEPTION during countries loading {"ActionId":"cb357e1f-eb89-42dd-befb-7918cbcfc9be","ActionName":"NoorCanvas.Controllers.HostController.GetCountries (NoorCanvas)","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9B59HAC5"}
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'dbo.Countries'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.FromSqlQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.FromSqlQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at NoorCanvas.Controllers.HostController.GetCountries(String guid) in D:\PROJECTS\NOOR CANVAS\SPA\NoorCanvas\Controllers\HostController.cs:line 768
ClientConnectionId:0bd4f02d-2486-412f-8c50-7d46076ba32f
Error Number:208,State:1,Class:16
[2025-09-20 09:37:20.764 -04:00 ERR] NoorCanvas.Controllers.HostController COPILOT-DEBUG: [d5645b35] [COUNTRIES-API] Exception Type: SqlException, Message: Invalid object name 'dbo.Countries'. {"ActionId":"cb357e1f-eb89-42dd-befb-7918cbcfc9be","ActionName":"NoorCanvas.Controllers.HostController.GetCountries (NoorCanvas)","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9B59HAC5"}
[2025-09-20 09:37:20.772 -04:00 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor Executing ObjectResult, writing value of type '<>f__AnonymousType25`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'. {"EventId":{"Id":1,"Name":"ObjectResultExecuting"},"ActionId":"cb357e1f-eb89-42dd-befb-7918cbcfc9be","ActionName":"NoorCanvas.Controllers.HostController.GetCountries (NoorCanvas)","RequestId":"0HNFO9B59HAC5:00000001","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9B59HAC5"}
[2025-09-20 09:37:20.783 -04:00 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Executed action NoorCanvas.Controllers.HostController.GetCountries (NoorCanvas) in 237.6805ms {"EventId":{"Id":105,"Name":"ActionExecuted"},"RequestId":"0HNFO9B59HAC5:00000001","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9B59HAC5"}
[2025-09-20 09:37:20.783 -04:00 INF] System.Net.Http.HttpClient.default.ClientHandler Received HTTP response headers after 277.9686ms - 500 {"EventId":{"Id":101,"Name":"RequestEnd"},"HttpMethod":"GET","Uri":"https://localhost:9091/api/host/countries?guid=USER212B","ActionId":"20e759ff-9b57-4c25-a497-7da7031cb4ec","ActionName":"/_Host","RequestId":"0HNFO9B59HAC2:00000003","RequestPath":"/user/landing/USER212B","ConnectionId":"0HNFO9B59HAC2","Scope":["HTTP GET https://localhost:9091/api/host/countries?guid=USER212B"]}
[2025-09-20 09:37:20.797 -04:00 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware Executed endpoint 'NoorCanvas.Controllers.HostController.GetCountries (NoorCanvas)' {"EventId":{"Id":1,"Name":"ExecutedEndpoint"},"RequestId":"0HNFO9B59HAC5:00000001","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9B59HAC5"}
[2025-09-20 09:37:20.803 -04:00 INF] System.Net.Http.HttpClient.default.LogicalHandler End processing HTTP request after 317.9954ms - 500 {"EventId":{"Id":101,"Name":"RequestPipelineEnd"},"HttpMethod":"GET","Uri":"https://localhost:9091/api/host/countries?guid=USER212B","ActionId":"20e759ff-9b57-4c25-a497-7da7031cb4ec","ActionName":"/_Host","RequestId":"0HNFO9B59HAC2:00000003","RequestPath":"/user/landing/USER212B","ConnectionId":"0HNFO9B59HAC2","Scope":["HTTP GET https://localhost:9091/api/host/countries?guid=USER212B"]}
[2025-09-20 09:37:20.817 -04:00 INF] NoorCanvas.Services.DebugService NOOR_DEBUG: [HTTP_MIDDLEWARE] Request Completed | CorrelationId: c5ed472f | Data: {"StatusCode":500,"ContentType":"application/json; charset=utf-8","ContentLength":null,"DurationMs":298} {"RequestId":"0HNFO9B59HAC5:00000001","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9B59HAC5"}
[2025-09-20 09:37:20.829 -04:00 INF] NoorCanvas.Services.DebugService NOOR_DEBUG: [PERFORMANCE] Operation Completed: HTTP_GET_/api/host/countries | Data: {"DurationMs":298.2862,"Component":"HTTP_MIDDLEWARE"} {"RequestId":"0HNFO9B59HAC5:00000001","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9B59HAC5"}
[2025-09-20 09:37:20.836 -04:00 INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/1.1 GET https://localhost:9091/api/host/countries?guid=USER212B - 500 null application/json; charset=utf-8 326.8076ms {"EventId":{"Id":2},"RequestId":"0HNFO9B59HAC5:00000001","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9B59HAC5"}
[2025-09-20 09:37:20.836 -04:00 INF] NoorCanvas.Pages.UserLanding COPILOT-DEBUG: [6ef5eea9] [COUNTRIES] API response: "InternalServerError" {"ActionId":"20e759ff-9b57-4c25-a497-7da7031cb4ec","ActionName":"/_Host","RequestPath":"/user/landing/USER212B","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:20.851 -04:00 WRN] NoorCanvas.Pages.UserLanding COPILOT-DEBUG: [6ef5eea9] [COUNTRIES] Failed to load countries - HTTP "InternalServerError" {"ActionId":"20e759ff-9b57-4c25-a497-7da7031cb4ec","ActionName":"/_Host","RequestPath":"/user/landing/USER212B","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:20.908 -04:00 INF] Microsoft.AspNetCore.Mvc.RazorPages.Infrastructure.PageActionInvoker Executed page /_Host in 1457.6993ms {"EventId":{"Id":104,"Name":"PageExecuted"},"RequestId":"0HNFO9B59HAC2:00000003","RequestPath":"/user/landing/USER212B","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:20.919 -04:00 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware Executed endpoint '/_Host' {"EventId":{"Id":1,"Name":"ExecutedEndpoint"},"RequestId":"0HNFO9B59HAC2:00000003","RequestPath":"/user/landing/USER212B","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:20.922 -04:00 INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/2 GET https://localhost:9091/NoorCanvas.styles.css - null null {"EventId":{"Id":1},"RequestId":"0HNFO9B59HAC2:00000005","RequestPath":"/NoorCanvas.styles.css","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:20.924 -04:00 INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/2 GET https://localhost:9091/images/branding/NC-Header.png?v=638939578408588235 - null null {"EventId":{"Id":1},"RequestId":"0HNFO9B59HAC2:00000007","RequestPath":"/images/branding/NC-Header.png","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:20.925 -04:00 INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/2 GET https://localhost:9091/_framework/blazor.server.js - null null {"EventId":{"Id":1},"RequestId":"0HNFO9B59HAC2:00000009","RequestPath":"/_framework/blazor.server.js","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:20.945 -04:00 INF] NoorCanvas.Services.DebugService NOOR_DEBUG: [HTTP_MIDDLEWARE] Request Completed | CorrelationId: a08de8ae | Data: {"StatusCode":200,"ContentType":"text/html; charset=utf-8","ContentLength":null,"DurationMs":1536} {"RequestId":"0HNFO9B59HAC2:00000003","RequestPath":"/user/landing/USER212B","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:20.955 -04:00 INF] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware The file /NoorCanvas.styles.css was not modified {"EventId":{"Id":6,"Name":"FileNotModified"},"RequestId":"0HNFO9B59HAC2:00000005","RequestPath":"/NoorCanvas.styles.css","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:20.962 -04:00 INF] NoorCanvas.Services.DebugService NOOR_DEBUG: [HTTP_MIDDLEWARE] Request Started | CorrelationId: c4fa85c9 | Data: {"Method":"GET","Path":{"Value":"/_framework/blazor.server.js","HasValue":true},"QueryString":"","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Code/1.104.1 Chrome/138.0.7204.235 Electron/37.3.1 Safari/537.36","RemoteIP":"::1","ContentType":null,"ContentLength":null} {"RequestId":"0HNFO9B59HAC2:00000009","RequestPath":"/_framework/blazor.server.js","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:20.983 -04:00 INF] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '/images/branding/NC-Header.png'. Physical path: 'D:\PROJECTS\NOOR CANVAS\SPA\NoorCanvas\wwwroot\images\branding\NC-Header.png' {"EventId":{"Id":2,"Name":"FileServed"},"RequestId":"0HNFO9B59HAC2:00000007","RequestPath":"/images/branding/NC-Header.png","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:20.984 -04:00 INF] NoorCanvas.Services.DebugService NOOR_DEBUG: [PERFORMANCE] Slow Operation: HTTP_GET_/user/landing/USER212B | Data: {"DurationMs":1536.6048,"ThresholdMs":1000,"Component":"HTTP_MIDDLEWARE"} {"RequestId":"0HNFO9B59HAC2:00000003","RequestPath":"/user/landing/USER212B","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:20.985 -04:00 INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/2 GET https://localhost:9091/NoorCanvas.styles.css - 304 null text/css 62.4791ms {"EventId":{"Id":2},"RequestId":"0HNFO9B59HAC2:00000005","RequestPath":"/NoorCanvas.styles.css","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:20.987 -04:00 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware Executing endpoint 'Blazor static files' {"EventId":{"Name":"ExecutingEndpoint"},"RequestId":"0HNFO9B59HAC2:00000009","RequestPath":"/_framework/blazor.server.js","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:21.005 -04:00 INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/2 GET https://localhost:9091/images/branding/NC-Header.png?v=638939578408588235 - 200 1769400 image/png 81.0949ms {"EventId":{"Id":2},"RequestId":"0HNFO9B59HAC2:00000007","RequestPath":"/images/branding/NC-Header.png","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:21.012 -04:00 INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/2 GET https://localhost:9091/user/landing/USER212B?id=4cbaadbe-65fd-4826-b0c4-711c20df2414&vscodeBrowserReqId=1758375439385 - 200 null text/html; charset=utf-8 1618.9631ms {"EventId":{"Id":2},"RequestId":"0HNFO9B59HAC2:00000003","RequestPath":"/user/landing/USER212B","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:21.020 -04:00 INF] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware The file /_framework/blazor.server.js was not modified {"EventId":{"Id":6,"Name":"FileNotModified"},"RequestId":"0HNFO9B59HAC2:00000009","RequestPath":"/_framework/blazor.server.js","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:21.046 -04:00 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware Executed endpoint 'Blazor static files' {"EventId":{"Id":1,"Name":"ExecutedEndpoint"},"RequestId":"0HNFO9B59HAC2:00000009","RequestPath":"/_framework/blazor.server.js","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:21.053 -04:00 INF] NoorCanvas.Services.DebugService NOOR_DEBUG: [HTTP_MIDDLEWARE] Request Completed | CorrelationId: c4fa85c9 | Data: {"StatusCode":304,"ContentType":"text/javascript","ContentLength":null,"DurationMs":90} {"RequestId":"0HNFO9B59HAC2:00000009","RequestPath":"/_framework/blazor.server.js","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:21.057 -04:00 INF] NoorCanvas.Services.DebugService NOOR_DEBUG: [PERFORMANCE] Operation Completed: HTTP_GET_/_framework/blazor.server.js | Data: {"DurationMs":90.7578,"Component":"HTTP_MIDDLEWARE"} {"RequestId":"0HNFO9B59HAC2:00000009","RequestPath":"/_framework/blazor.server.js","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:21.061 -04:00 INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/2 GET https://localhost:9091/_framework/blazor.server.js - 304 null text/javascript 135.754ms {"EventId":{"Id":2},"RequestId":"0HNFO9B59HAC2:00000009","RequestPath":"/_framework/blazor.server.js","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:21.074 -04:00 INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/2 GET https://localhost:9091/_blazor/initializers - null null {"EventId":{"Id":1},"RequestId":"0HNFO9B59HAC2:0000000B","RequestPath":"/_blazor/initializers","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:21.085 -04:00 INF] NoorCanvas.Services.DebugService NOOR_DEBUG: [HTTP_MIDDLEWARE] Request Started | CorrelationId: 09787a01 | Data: {"Method":"GET","Path":{"Value":"/_blazor/initializers","HasValue":true},"QueryString":"","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Code/1.104.1 Chrome/138.0.7204.235 Electron/37.3.1 Safari/537.36","RemoteIP":"::1","ContentType":null,"ContentLength":null} {"RequestId":"0HNFO9B59HAC2:0000000B","RequestPath":"/_blazor/initializers","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:21.089 -04:00 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware Executing endpoint 'Blazor initializers' {"EventId":{"Name":"ExecutingEndpoint"},"RequestId":"0HNFO9B59HAC2:0000000B","RequestPath":"/_blazor/initializers","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:21.096 -04:00 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware Executed endpoint 'Blazor initializers' {"EventId":{"Id":1,"Name":"ExecutedEndpoint"},"RequestId":"0HNFO9B59HAC2:0000000B","RequestPath":"/_blazor/initializers","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:21.102 -04:00 INF] NoorCanvas.Services.DebugService NOOR_DEBUG: [HTTP_MIDDLEWARE] Request Completed | CorrelationId: 09787a01 | Data: {"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"DurationMs":17} {"RequestId":"0HNFO9B59HAC2:0000000B","RequestPath":"/_blazor/initializers","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:21.106 -04:00 INF] NoorCanvas.Services.DebugService NOOR_DEBUG: [PERFORMANCE] Operation Completed: HTTP_GET_/_blazor/initializers | Data: {"DurationMs":17.2606,"Component":"HTTP_MIDDLEWARE"} {"RequestId":"0HNFO9B59HAC2:0000000B","RequestPath":"/_blazor/initializers","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:21.110 -04:00 INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/2 GET https://localhost:9091/_blazor/initializers - 200 null application/json; charset=utf-8 36.0782ms {"EventId":{"Id":2},"RequestId":"0HNFO9B59HAC2:0000000B","RequestPath":"/_blazor/initializers","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:21.117 -04:00 INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/2 POST https://localhost:9091/_blazor/negotiate?negotiateVersion=1 - null 0 {"EventId":{"Id":1},"RequestId":"0HNFO9B59HAC2:0000000D","RequestPath":"/_blazor/negotiate","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:21.128 -04:00 INF] NoorCanvas.Services.DebugService NOOR_DEBUG: [HTTP_MIDDLEWARE] Request Started | CorrelationId: 192b0251 | Data: {"Method":"POST","Path":{"Value":"/_blazor/negotiate","HasValue":true},"QueryString":"?negotiateVersion=1","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Code/1.104.1 Chrome/138.0.7204.235 Electron/37.3.1 Safari/537.36","RemoteIP":"::1","ContentType":null,"ContentLength":0} {"RequestId":"0HNFO9B59HAC2:0000000D","RequestPath":"/_blazor/negotiate","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:21.133 -04:00 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService CORS policy execution successful. {"EventId":{"Id":4,"Name":"PolicySuccess"},"RequestId":"0HNFO9B59HAC2:0000000D","RequestPath":"/_blazor/negotiate","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:21.140 -04:00 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware Executing endpoint '/_blazor/negotiate' {"EventId":{"Name":"ExecutingEndpoint"},"RequestId":"0HNFO9B59HAC2:0000000D","RequestPath":"/_blazor/negotiate","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:21.149 -04:00 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware Executed endpoint '/_blazor/negotiate' {"EventId":{"Id":1,"Name":"ExecutedEndpoint"},"RequestId":"0HNFO9B59HAC2:0000000D","RequestPath":"/_blazor/negotiate","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:21.155 -04:00 INF] NoorCanvas.Services.DebugService NOOR_DEBUG: [HTTP_MIDDLEWARE] Request Completed | CorrelationId: 192b0251 | Data: {"StatusCode":200,"ContentType":"application/json","ContentLength":316,"DurationMs":26} {"RequestId":"0HNFO9B59HAC2:0000000D","RequestPath":"/_blazor/negotiate","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:21.161 -04:00 INF] NoorCanvas.Services.DebugService NOOR_DEBUG: [PERFORMANCE] Operation Completed: HTTP_POST_/_blazor/negotiate | Data: {"DurationMs":26.9371,"Component":"HTTP_MIDDLEWARE"} {"RequestId":"0HNFO9B59HAC2:0000000D","RequestPath":"/_blazor/negotiate","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:21.166 -04:00 INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/2 POST https://localhost:9091/_blazor/negotiate?negotiateVersion=1 - 200 316 application/json 49.0913ms {"EventId":{"Id":2},"RequestId":"0HNFO9B59HAC2:0000000D","RequestPath":"/_blazor/negotiate","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:21.169 -04:00 INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/2 CONNECT https://localhost:9091/_blazor?id=2kBUNp2HbIGj2ymQxbtFRg - null null {"EventId":{"Id":1},"RequestId":"0HNFO9B59HAC2:0000000F","RequestPath":"/_blazor","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:21.185 -04:00 INF] NoorCanvas.Services.DebugService NOOR_DEBUG: [HTTP_MIDDLEWARE] Request Started | CorrelationId: 1ee0702b | Data: {"Method":"CONNECT","Path":{"Value":"/_blazor","HasValue":true},"QueryString":"?id=2kBUNp2HbIGj2ymQxbtFRg","UserAgent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Code/1.104.1 Chrome/138.0.7204.235 Electron/37.3.1 Safari/537.36","RemoteIP":"::1","ContentType":null,"ContentLength":null} {"RequestId":"0HNFO9B59HAC2:0000000F","RequestPath":"/_blazor","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:21.190 -04:00 INF] Microsoft.AspNetCore.Cors.Infrastructure.CorsService CORS policy execution successful. {"EventId":{"Id":4,"Name":"PolicySuccess"},"RequestId":"0HNFO9B59HAC2:0000000F","RequestPath":"/_blazor","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:21.198 -04:00 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware Executing endpoint '/_blazor' {"EventId":{"Name":"ExecutingEndpoint"},"RequestId":"0HNFO9B59HAC2:0000000F","RequestPath":"/_blazor","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:21.209 -04:00 DBG] Microsoft.AspNetCore.SignalR.HubConnectionHandler OnConnectedAsync started. {"EventId":{"Id":5,"Name":"ConnectedStarting"},"TransportConnectionId":"rj_kFstAGlOR9tmJMtoCvQ","RequestId":"0HNFO9B59HAC2:0000000F","RequestPath":"/_blazor","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:21.223 -04:00 DBG] Microsoft.AspNetCore.SignalR.Internal.DefaultHubProtocolResolver Found protocol implementation for requested protocol: blazorpack. {"EventId":{"Id":2,"Name":"FoundImplementationForProtocol"},"TransportConnectionId":"rj_kFstAGlOR9tmJMtoCvQ","RequestId":"0HNFO9B59HAC2:0000000F","RequestPath":"/_blazor","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:21.233 -04:00 DBG] Microsoft.AspNetCore.SignalR.HubConnectionContext Completed connection handshake. Using HubProtocol 'blazorpack'. {"EventId":{"Id":1,"Name":"HandshakeComplete"},"TransportConnectionId":"rj_kFstAGlOR9tmJMtoCvQ","RequestId":"0HNFO9B59HAC2:0000000F","RequestPath":"/_blazor","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:21.249 -04:00 DBG] Microsoft.AspNetCore.SignalR.Internal.DefaultHubDispatcher Received hub invocation: InvocationMessage { InvocationId: "0", Target: "StartCircuit", Arguments: [ https://localhost:9091/, https://localhost:9091/user/landing/USER212B?id=4cbaadbe-65fd-4826-b0c4-711c20df2414&vscodeBrowserReqId=1758375439385, [{"type":"server","prerenderId":"b59f2f8cee6449179dc68a44512358eb","key":{"locationHash":"54912F3C651A014F1B275C954CB092DE947378CDB83E8965F8D7F4800066B6D8:0","formattedComponentKey":""},"sequence":0,"descriptor":"CfDJ8DeH3DqcBblEm/Wh6jxNrbPQXi0X/eEjQIQvpcjrh1fDYbKIrn7XQMfxhRE1kMJFcS1z5QIsRom04sh57ou57nAzXzcBGSwN5L7LDlj1dVwMPmc5JFWV6fb5SC4c7xEtDgtVAWKNVPc/eFunRkuP4jLw6l3Rir1rtGam85swTSZ5EC/AGnEIdQKcnHWHNhX4xpops6/m+rLAeJDqLIeH9XwmoIIxg/cPcgyiBTxcXSg25JZUsBvHWKvgZYhAxWZ2NJaTlJzYgvl2BqcYn4e4hiEd5AdO7oPmcfe38zNEVHUJUUYRzMb+n+G75oJ7dsfQHaXAeKiYALSqX22PLFwNKwggPzfJeUTOt3tqOBkCduSOzmAXKcAYgg3tsD/eQrNqmFnWNPfwdCiinEWmnVpkSY0tkuYkvDxPV9W8TgmxdOBteAgGV497UvFcQz2lP8el3v0ZH7Yd4XWarXk9nhvdTamDiKDHp0jjH4m95KA/xH1cnTVDthU0qAoSrdBYk8s0GQ==","uniqueId":0}],  ], StreamIds: [  ] }. {"EventId":{"Id":1,"Name":"ReceivedHubInvocation"},"TransportConnectionId":"rj_kFstAGlOR9tmJMtoCvQ","RequestId":"0HNFO9B59HAC2:0000000F","RequestPath":"/_blazor","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:21.316 -04:00 INF] NoorCanvas.Pages.UserLanding NOOR-DEBUG: [8d44a317] UserLanding OnInitialized - SessionToken: USER212B {"TransportConnectionId":"rj_kFstAGlOR9tmJMtoCvQ","RequestPath":"/_blazor","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:21.322 -04:00 INF] NoorCanvas.Pages.UserLanding NOOR-DEBUG: [8d44a317] Loading session info for token: USER212B {"TransportConnectionId":"rj_kFstAGlOR9tmJMtoCvQ","RequestPath":"/_blazor","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:21.326 -04:00 INF] NoorCanvas.Pages.UserLanding NOOR-DEBUG: [8d44a317] Calling session validation API for token: USER212B {"TransportConnectionId":"rj_kFstAGlOR9tmJMtoCvQ","RequestPath":"/_blazor","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:21.331 -04:00 INF] System.Net.Http.HttpClient.Default.LogicalHandler Start processing HTTP request GET https://localhost:9091/api/participant/session/USER212B/validate {"EventId":{"Id":100,"Name":"RequestPipelineStart"},"TransportConnectionId":"rj_kFstAGlOR9tmJMtoCvQ","RequestId":"0HNFO9B59HAC2:0000000F","RequestPath":"/_blazor","ConnectionId":"0HNFO9B59HAC2","Scope":["HTTP GET https://localhost:9091/api/participant/session/USER212B/validate"]}
[2025-09-20 09:37:21.342 -04:00 INF] System.Net.Http.HttpClient.Default.ClientHandler Sending HTTP request GET https://localhost:9091/api/participant/session/USER212B/validate {"EventId":{"Id":100,"Name":"RequestStart"},"TransportConnectionId":"rj_kFstAGlOR9tmJMtoCvQ","RequestId":"0HNFO9B59HAC2:0000000F","RequestPath":"/_blazor","ConnectionId":"0HNFO9B59HAC2","Scope":["HTTP GET https://localhost:9091/api/participant/session/USER212B/validate"]}
[2025-09-20 09:37:21.353 -04:00 INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/1.1 GET https://localhost:9091/api/participant/session/USER212B/validate - null null {"EventId":{"Id":1},"RequestId":"0HNFO9B59HAC4:00000002","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9B59HAC4"}
[2025-09-20 09:37:21.360 -04:00 DBG] Microsoft.AspNetCore.SignalR.Internal.DefaultHubDispatcher Received hub invocation: InvocationMessage { InvocationId: "", Target: "EndInvokeJSFromDotNet", Arguments: [ 2, True, [2,true,null] ], StreamIds: [  ] }. {"EventId":{"Id":1,"Name":"ReceivedHubInvocation"},"TransportConnectionId":"rj_kFstAGlOR9tmJMtoCvQ","RequestId":"0HNFO9B59HAC2:0000000F","RequestPath":"/_blazor","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:21.365 -04:00 INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/2 GET https://localhost:9091/images/branding/NC-Header.png?v=638939578413545712 - null null {"EventId":{"Id":1},"RequestId":"0HNFO9B59HAC2:00000011","RequestPath":"/images/branding/NC-Header.png","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:21.366 -04:00 INF] NoorCanvas.Services.DebugService NOOR_DEBUG: [HTTP_MIDDLEWARE] Request Started | CorrelationId: 62b5b344 | Data: {"Method":"GET","Path":{"Value":"/api/participant/session/USER212B/validate","HasValue":true},"QueryString":"","UserAgent":"","RemoteIP":"::1","ContentType":null,"ContentLength":null} {"RequestId":"0HNFO9B59HAC4:00000002","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9B59HAC4"}
[2025-09-20 09:37:21.388 -04:00 DBG] Microsoft.AspNetCore.SignalR.Internal.DefaultHubDispatcher Received hub invocation: InvocationMessage { InvocationId: "", Target: "OnRenderCompleted", Arguments: [ 2,  ], StreamIds: [  ] }. {"EventId":{"Id":1,"Name":"ReceivedHubInvocation"},"TransportConnectionId":"rj_kFstAGlOR9tmJMtoCvQ","RequestId":"0HNFO9B59HAC2:0000000F","RequestPath":"/_blazor","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:21.393 -04:00 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware Executing endpoint 'NoorCanvas.Controllers.ParticipantController.ValidateSessionToken (NoorCanvas)' {"EventId":{"Name":"ExecutingEndpoint"},"RequestId":"0HNFO9B59HAC4:00000002","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9B59HAC4"}
[2025-09-20 09:37:21.410 -04:00 INF] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '/images/branding/NC-Header.png'. Physical path: 'D:\PROJECTS\NOOR CANVAS\SPA\NoorCanvas\wwwroot\images\branding\NC-Header.png' {"EventId":{"Id":2,"Name":"FileServed"},"RequestId":"0HNFO9B59HAC2:00000011","RequestPath":"/images/branding/NC-Header.png","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:21.418 -04:00 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Route matched with {action = "ValidateSessionToken", controller = "Participant", page = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateSessionToken(System.String) on controller NoorCanvas.Controllers.ParticipantController (NoorCanvas). {"EventId":{"Id":102,"Name":"ControllerActionExecuting"},"ActionId":"b1bd0b53-ca7d-4b62-b5b2-4efe60bc1138","ActionName":"NoorCanvas.Controllers.ParticipantController.ValidateSessionToken (NoorCanvas)","RequestId":"0HNFO9B59HAC4:00000002","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9B59HAC4"}
[2025-09-20 09:37:21.426 -04:00 DBG] Microsoft.AspNetCore.SignalR.Internal.DefaultHubDispatcher Received hub invocation: InvocationMessage { InvocationId: "", Target: "EndInvokeJSFromDotNet", Arguments: [ 3, True, [3,true,null] ], StreamIds: [  ] }. {"EventId":{"Id":1,"Name":"ReceivedHubInvocation"},"TransportConnectionId":"rj_kFstAGlOR9tmJMtoCvQ","RequestId":"0HNFO9B59HAC2:0000000F","RequestPath":"/_blazor","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:21.432 -04:00 INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/2 GET https://localhost:9091/images/branding/NC-Header.png?v=638939578413545712 - 200 1769400 image/png 66.9192ms {"EventId":{"Id":2},"RequestId":"0HNFO9B59HAC2:00000011","RequestPath":"/images/branding/NC-Header.png","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:21.443 -04:00 INF] NoorCanvas.Controllers.ParticipantController NOOR-PARTICIPANT-VALIDATE: [b458062b] Session validation request started {"ActionId":"b1bd0b53-ca7d-4b62-b5b2-4efe60bc1138","ActionName":"NoorCanvas.Controllers.ParticipantController.ValidateSessionToken (NoorCanvas)","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9B59HAC4"}
[2025-09-20 09:37:21.456 -04:00 INF] NoorCanvas.Controllers.ParticipantController NOOR-PARTICIPANT-VALIDATE: [b458062b] Token: USER212B, ClientIP: ::1, UserAgent: unknown {"ActionId":"b1bd0b53-ca7d-4b62-b5b2-4efe60bc1138","ActionName":"NoorCanvas.Controllers.ParticipantController.ValidateSessionToken (NoorCanvas)","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9B59HAC4"}
[2025-09-20 09:37:21.463 -04:00 INF] NoorCanvas.Controllers.ParticipantController NOOR-PARTICIPANT-VALIDATE: [b458062b] Request URL: https://localhost:9091/api/participant/session/USER212B/validate {"ActionId":"b1bd0b53-ca7d-4b62-b5b2-4efe60bc1138","ActionName":"NoorCanvas.Controllers.ParticipantController.ValidateSessionToken (NoorCanvas)","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9B59HAC4"}
[2025-09-20 09:37:21.469 -04:00 INF] NoorCanvas.Controllers.ParticipantController NOOR-PARTICIPANT-VALIDATE: [b458062b] Calling SimplifiedTokenService.ValidateTokenAsync for USER token {"ActionId":"b1bd0b53-ca7d-4b62-b5b2-4efe60bc1138","ActionName":"NoorCanvas.Controllers.ParticipantController.ValidateSessionToken (NoorCanvas)","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9B59HAC4"}
[2025-09-20 09:37:21.474 -04:00 INF] NoorCanvas.Services.SimplifiedTokenService NOOR-SIMPLIFIED: [ef79806d] Validating USER token: USER212B {"ActionId":"b1bd0b53-ca7d-4b62-b5b2-4efe60bc1138","ActionName":"NoorCanvas.Controllers.ParticipantController.ValidateSessionToken (NoorCanvas)","RequestId":"0HNFO9B59HAC4:00000002","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9B59HAC4"}
[2025-09-20 09:37:21.483 -04:00 INF] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [canvas].[Sessions] AS [s] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"ActionId":"b1bd0b53-ca7d-4b62-b5b2-4efe60bc1138","ActionName":"NoorCanvas.Controllers.ParticipantController.ValidateSessionToken (NoorCanvas)","RequestId":"0HNFO9B59HAC4:00000002","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9B59HAC4"}
[2025-09-20 09:37:21.492 -04:00 INF] NoorCanvas.Services.SimplifiedTokenService NOOR-SIMPLIFIED: [ef79806d] Total sessions in database: 1 {"ActionId":"b1bd0b53-ca7d-4b62-b5b2-4efe60bc1138","ActionName":"NoorCanvas.Controllers.ParticipantController.ValidateSessionToken (NoorCanvas)","RequestId":"0HNFO9B59HAC4:00000002","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9B59HAC4"}
[2025-09-20 09:37:21.501 -04:00 INF] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand (1ms) [Parameters=[@__token_0='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[SessionId], [s].[CreatedAt], [s].[Description], [s].[EndedAt], [s].[ExpiresAt], [s].[GroupId], [s].[HostGuid], [s].[HostToken], [s].[KSessionsId], [s].[MaxParticipants], [s].[ModifiedAt], [s].[ParticipantCount], [s].[StartedAt], [s].[Status], [s].[Title], [s].[TokenAccessCount], [s].[TokenCreatedByIp], [s].[TokenExpiresAt], [s].[TokenLastAccessedAt], [s].[UserToken]
FROM [canvas].[Sessions] AS [s]
WHERE [s].[UserToken] = @__token_0 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"ActionId":"b1bd0b53-ca7d-4b62-b5b2-4efe60bc1138","ActionName":"NoorCanvas.Controllers.ParticipantController.ValidateSessionToken (NoorCanvas)","RequestId":"0HNFO9B59HAC4:00000002","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9B59HAC4"}
[2025-09-20 09:37:21.511 -04:00 INF] NoorCanvas.Services.SimplifiedTokenService NOOR-SIMPLIFIED: [ef79806d] Sessions matching token 'USER212B': 1 {"ActionId":"b1bd0b53-ca7d-4b62-b5b2-4efe60bc1138","ActionName":"NoorCanvas.Controllers.ParticipantController.ValidateSessionToken (NoorCanvas)","RequestId":"0HNFO9B59HAC4:00000002","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9B59HAC4"}
[2025-09-20 09:37:21.517 -04:00 INF] NoorCanvas.Services.SimplifiedTokenService NOOR-SIMPLIFIED: [ef79806d] Matching session - ID: 1, KSessionsId: 212, Status: Active, ExpiresAt: NULL, HostToken: HOST212A, UserToken: USER212B {"ActionId":"b1bd0b53-ca7d-4b62-b5b2-4efe60bc1138","ActionName":"NoorCanvas.Controllers.ParticipantController.ValidateSessionToken (NoorCanvas)","RequestId":"0HNFO9B59HAC4:00000002","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9B59HAC4"}
[2025-09-20 09:37:21.525 -04:00 INF] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand (0ms) [Parameters=[@__token_0='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[SessionId], [s].[CreatedAt], [s].[Description], [s].[EndedAt], [s].[ExpiresAt], [s].[GroupId], [s].[HostGuid], [s].[HostToken], [s].[KSessionsId], [s].[MaxParticipants], [s].[ModifiedAt], [s].[ParticipantCount], [s].[StartedAt], [s].[Status], [s].[Title], [s].[TokenAccessCount], [s].[TokenCreatedByIp], [s].[TokenExpiresAt], [s].[TokenLastAccessedAt], [s].[UserToken]
FROM [canvas].[Sessions] AS [s]
WHERE ([s].[ExpiresAt] IS NULL OR [s].[ExpiresAt] > GETUTCDATE()) AND [s].[Status] <> N'Expired' AND [s].[UserToken] = @__token_0 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"ActionId":"b1bd0b53-ca7d-4b62-b5b2-4efe60bc1138","ActionName":"NoorCanvas.Controllers.ParticipantController.ValidateSessionToken (NoorCanvas)","RequestId":"0HNFO9B59HAC4:00000002","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9B59HAC4"}
[2025-09-20 09:37:21.539 -04:00 INF] NoorCanvas.Services.SimplifiedTokenService NOOR-SIMPLIFIED: [ef79806d] Token validation successful - Session 1 {"ActionId":"b1bd0b53-ca7d-4b62-b5b2-4efe60bc1138","ActionName":"NoorCanvas.Controllers.ParticipantController.ValidateSessionToken (NoorCanvas)","RequestId":"0HNFO9B59HAC4:00000002","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9B59HAC4"}
[2025-09-20 09:37:21.547 -04:00 INF] NoorCanvas.Controllers.ParticipantController NOOR-PARTICIPANT-VALIDATE: [b458062b] SimplifiedTokenService returned: Session 1 {"ActionId":"b1bd0b53-ca7d-4b62-b5b2-4efe60bc1138","ActionName":"NoorCanvas.Controllers.ParticipantController.ValidateSessionToken (NoorCanvas)","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9B59HAC4"}
[2025-09-20 09:37:21.553 -04:00 INF] NoorCanvas.Controllers.ParticipantController NOOR-PARTICIPANT-VALIDATE: [b458062b] Session found: SessionId=1, KSessionsId=212, Title=Test Session 212, Status=Active {"ActionId":"b1bd0b53-ca7d-4b62-b5b2-4efe60bc1138","ActionName":"NoorCanvas.Controllers.ParticipantController.ValidateSessionToken (NoorCanvas)","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9B59HAC4"}
[2025-09-20 09:37:21.561 -04:00 INF] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand (0ms) [Parameters=[@__session_SessionId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [canvas].[Participants] AS [p]
WHERE [p].[SessionId] = @__session_SessionId_0 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"ActionId":"b1bd0b53-ca7d-4b62-b5b2-4efe60bc1138","ActionName":"NoorCanvas.Controllers.ParticipantController.ValidateSessionToken (NoorCanvas)","RequestId":"0HNFO9B59HAC4:00000002","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9B59HAC4"}
[2025-09-20 09:37:21.573 -04:00 INF] NoorCanvas.Controllers.ParticipantController NOOR-PARTICIPANT-VALIDATE: [b458062b] Validation successful! Returning response {"ActionId":"b1bd0b53-ca7d-4b62-b5b2-4efe60bc1138","ActionName":"NoorCanvas.Controllers.ParticipantController.ValidateSessionToken (NoorCanvas)","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9B59HAC4"}
[2025-09-20 09:37:21.581 -04:00 INF] NoorCanvas.Controllers.ParticipantController NOOR-PARTICIPANT-VALIDATE: [b458062b] Response: Valid=true, SessionId=1, Title=Test Session 212, Status=Active, ExpiresAt=null {"ActionId":"b1bd0b53-ca7d-4b62-b5b2-4efe60bc1138","ActionName":"NoorCanvas.Controllers.ParticipantController.ValidateSessionToken (NoorCanvas)","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9B59HAC4"}
[2025-09-20 09:37:21.589 -04:00 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor Executing OkObjectResult, writing value of type '<>f__AnonymousType41`7[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int64, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType42`10[[System.Int64, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.TimeSpan, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], NoorCanvas, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[<>f__AnonymousType43`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], NoorCanvas, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'. {"EventId":{"Id":1,"Name":"ObjectResultExecuting"},"ActionId":"b1bd0b53-ca7d-4b62-b5b2-4efe60bc1138","ActionName":"NoorCanvas.Controllers.ParticipantController.ValidateSessionToken (NoorCanvas)","RequestId":"0HNFO9B59HAC4:00000002","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9B59HAC4"}
[2025-09-20 09:37:21.603 -04:00 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Executed action NoorCanvas.Controllers.ParticipantController.ValidateSessionToken (NoorCanvas) in 162.0796ms {"EventId":{"Id":105,"Name":"ActionExecuted"},"RequestId":"0HNFO9B59HAC4:00000002","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9B59HAC4"}
[2025-09-20 09:37:21.603 -04:00 INF] System.Net.Http.HttpClient.Default.ClientHandler Received HTTP response headers after 250.3333ms - 200 {"EventId":{"Id":101,"Name":"RequestEnd"},"HttpMethod":"GET","Uri":"https://localhost:9091/api/participant/session/USER212B/validate","TransportConnectionId":"rj_kFstAGlOR9tmJMtoCvQ","RequestId":"0HNFO9B59HAC2:0000000F","RequestPath":"/_blazor","ConnectionId":"0HNFO9B59HAC2","Scope":["HTTP GET https://localhost:9091/api/participant/session/USER212B/validate"]}
[2025-09-20 09:37:21.616 -04:00 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware Executed endpoint 'NoorCanvas.Controllers.ParticipantController.ValidateSessionToken (NoorCanvas)' {"EventId":{"Id":1,"Name":"ExecutedEndpoint"},"RequestId":"0HNFO9B59HAC4:00000002","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9B59HAC4"}
[2025-09-20 09:37:21.620 -04:00 INF] System.Net.Http.HttpClient.Default.LogicalHandler End processing HTTP request after 288.9934ms - 200 {"EventId":{"Id":101,"Name":"RequestPipelineEnd"},"HttpMethod":"GET","Uri":"https://localhost:9091/api/participant/session/USER212B/validate","TransportConnectionId":"rj_kFstAGlOR9tmJMtoCvQ","RequestId":"0HNFO9B59HAC2:0000000F","RequestPath":"/_blazor","ConnectionId":"0HNFO9B59HAC2","Scope":["HTTP GET https://localhost:9091/api/participant/session/USER212B/validate"]}
[2025-09-20 09:37:21.633 -04:00 INF] NoorCanvas.Services.DebugService NOOR_DEBUG: [HTTP_MIDDLEWARE] Request Completed | CorrelationId: 62b5b344 | Data: {"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"DurationMs":266} {"RequestId":"0HNFO9B59HAC4:00000002","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9B59HAC4"}
[2025-09-20 09:37:21.643 -04:00 INF] NoorCanvas.Services.DebugService NOOR_DEBUG: [PERFORMANCE] Operation Completed: HTTP_GET_/api/participant/session/USER212B/validate | Data: {"DurationMs":266.7225,"Component":"HTTP_MIDDLEWARE"} {"RequestId":"0HNFO9B59HAC4:00000002","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9B59HAC4"}
[2025-09-20 09:37:21.648 -04:00 INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/1.1 GET https://localhost:9091/api/participant/session/USER212B/validate - 200 null application/json; charset=utf-8 294.1748ms {"EventId":{"Id":2},"RequestId":"0HNFO9B59HAC4:00000002","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9B59HAC4"}
[2025-09-20 09:37:21.648 -04:00 INF] NoorCanvas.Pages.UserLanding NOOR-DEBUG: [8d44a317] Session validation API response: "OK" {"TransportConnectionId":"rj_kFstAGlOR9tmJMtoCvQ","RequestPath":"/_blazor","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:21.659 -04:00 INF] NoorCanvas.Pages.UserLanding NOOR-DEBUG: [8d44a317] Session validation response content: {"valid":true,"sessionId":1,"token":"USER212B","expiresAt":null,"session":{"sessionId":1,"title":"Test Session 212","description":"Test session for registration debugging","status":"Active","participantCount":0,"maxParticipants":null,"startedAt":"2025-09-20T08:30:22.6333333","createdAt":"2025-09-20T08:30:22.6333333","startTime":"2025-09-20T08:35:22.6333333","duration":"01:00:00"},"participant":{"joinUrl":"/session/waiting/USER212B","accessCount":0,"lastAccessedAt":null},"requestId":"b458062b"} {"TransportConnectionId":"rj_kFstAGlOR9tmJMtoCvQ","RequestPath":"/_blazor","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:21.665 -04:00 INF] NoorCanvas.Pages.UserLanding NOOR-DEBUG: [8d44a317] Session validation successful - SessionID: 1, Title: Test Session 212 {"TransportConnectionId":"rj_kFstAGlOR9tmJMtoCvQ","RequestPath":"/_blazor","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:21.670 -04:00 INF] NoorCanvas.Pages.UserLanding NOOR-DEBUG: [8d44a317] Updated Model.SessionName to: Test Session 212, SessionDescription to: Status: Active {"TransportConnectionId":"rj_kFstAGlOR9tmJMtoCvQ","RequestPath":"/_blazor","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:21.677 -04:00 INF] NoorCanvas.Pages.UserLanding NOOR-DEBUG: [8d44a317] URL token validated successfully - switching to registration panel {"TransportConnectionId":"rj_kFstAGlOR9tmJMtoCvQ","RequestPath":"/_blazor","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:21.683 -04:00 INF] NoorCanvas.Pages.UserLanding NOOR-DEBUG: [8d44a317] Loading countries dropdown after URL token validation... {"TransportConnectionId":"rj_kFstAGlOR9tmJMtoCvQ","RequestPath":"/_blazor","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:21.690 -04:00 INF] NoorCanvas.Pages.UserLanding COPILOT-DEBUG: [757273d0] [COUNTRIES] Loading countries from API... {"TransportConnectionId":"rj_kFstAGlOR9tmJMtoCvQ","RequestPath":"/_blazor","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:21.693 -04:00 DBG] Microsoft.AspNetCore.SignalR.Internal.DefaultHubDispatcher Received hub invocation: InvocationMessage { InvocationId: "", Target: "OnRenderCompleted", Arguments: [ 3,  ], StreamIds: [  ] }. {"EventId":{"Id":1,"Name":"ReceivedHubInvocation"},"TransportConnectionId":"rj_kFstAGlOR9tmJMtoCvQ","RequestId":"0HNFO9B59HAC2:0000000F","RequestPath":"/_blazor","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:21.694 -04:00 INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/2 GET https://localhost:9091/images/branding/NC-Header.png?v=638939578416883737 - null null {"EventId":{"Id":1},"RequestId":"0HNFO9B59HAC2:00000013","RequestPath":"/images/branding/NC-Header.png","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:21.702 -04:00 INF] NoorCanvas.Pages.UserLanding COPILOT-DEBUG: [757273d0] [COUNTRIES] GET /api/host/countries?guid=USER212B {"TransportConnectionId":"rj_kFstAGlOR9tmJMtoCvQ","RequestPath":"/_blazor","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:21.724 -04:00 INF] System.Net.Http.HttpClient.default.LogicalHandler Start processing HTTP request GET https://localhost:9091/api/host/countries?guid=USER212B {"EventId":{"Id":100,"Name":"RequestPipelineStart"},"TransportConnectionId":"rj_kFstAGlOR9tmJMtoCvQ","RequestId":"0HNFO9B59HAC2:0000000F","RequestPath":"/_blazor","ConnectionId":"0HNFO9B59HAC2","Scope":["HTTP GET https://localhost:9091/api/host/countries?guid=USER212B"]}
[2025-09-20 09:37:21.739 -04:00 INF] System.Net.Http.HttpClient.default.ClientHandler Sending HTTP request GET https://localhost:9091/api/host/countries?guid=USER212B {"EventId":{"Id":100,"Name":"RequestStart"},"TransportConnectionId":"rj_kFstAGlOR9tmJMtoCvQ","RequestId":"0HNFO9B59HAC2:0000000F","RequestPath":"/_blazor","ConnectionId":"0HNFO9B59HAC2","Scope":["HTTP GET https://localhost:9091/api/host/countries?guid=USER212B"]}
[2025-09-20 09:37:21.739 -04:00 INF] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '/images/branding/NC-Header.png'. Physical path: 'D:\PROJECTS\NOOR CANVAS\SPA\NoorCanvas\wwwroot\images\branding\NC-Header.png' {"EventId":{"Id":2,"Name":"FileServed"},"RequestId":"0HNFO9B59HAC2:00000013","RequestPath":"/images/branding/NC-Header.png","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:21.751 -04:00 INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/1.1 GET https://localhost:9091/api/host/countries?guid=USER212B - null null {"EventId":{"Id":1},"RequestId":"0HNFO9B59HAC5:00000002","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9B59HAC5"}
[2025-09-20 09:37:21.754 -04:00 INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/2 GET https://localhost:9091/images/branding/NC-Header.png?v=638939578416883737 - 200 1769400 image/png 59.6593ms {"EventId":{"Id":2},"RequestId":"0HNFO9B59HAC2:00000013","RequestPath":"/images/branding/NC-Header.png","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:21.769 -04:00 INF] NoorCanvas.Services.DebugService NOOR_DEBUG: [HTTP_MIDDLEWARE] Request Started | CorrelationId: ac10098d | Data: {"Method":"GET","Path":{"Value":"/api/host/countries","HasValue":true},"QueryString":"?guid=USER212B","UserAgent":"NoorCanvas-BlazorServer","RemoteIP":"::1","ContentType":null,"ContentLength":null} {"RequestId":"0HNFO9B59HAC5:00000002","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9B59HAC5"}
[2025-09-20 09:37:21.775 -04:00 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware Executing endpoint 'NoorCanvas.Controllers.HostController.GetCountries (NoorCanvas)' {"EventId":{"Name":"ExecutingEndpoint"},"RequestId":"0HNFO9B59HAC5:00000002","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9B59HAC5"}
[2025-09-20 09:37:21.781 -04:00 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Route matched with {action = "GetCountries", controller = "Host", page = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCountries(System.String) on controller NoorCanvas.Controllers.HostController (NoorCanvas). {"EventId":{"Id":102,"Name":"ControllerActionExecuting"},"ActionId":"cb357e1f-eb89-42dd-befb-7918cbcfc9be","ActionName":"NoorCanvas.Controllers.HostController.GetCountries (NoorCanvas)","RequestId":"0HNFO9B59HAC5:00000002","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9B59HAC5"}
[2025-09-20 09:37:21.791 -04:00 INF] NoorCanvas.Controllers.HostController COPILOT-DEBUG: [cd982fe4] [COUNTRIES-API] Countries request started {"ActionId":"cb357e1f-eb89-42dd-befb-7918cbcfc9be","ActionName":"NoorCanvas.Controllers.HostController.GetCountries (NoorCanvas)","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9B59HAC5"}
[2025-09-20 09:37:21.796 -04:00 INF] NoorCanvas.Controllers.HostController COPILOT-DEBUG: [cd982fe4] [COUNTRIES-API] Token: USER212B, ClientIP: ::1, UserAgent: NoorCanvas-BlazorServer {"ActionId":"cb357e1f-eb89-42dd-befb-7918cbcfc9be","ActionName":"NoorCanvas.Controllers.HostController.GetCountries (NoorCanvas)","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9B59HAC5"}
[2025-09-20 09:37:21.801 -04:00 INF] NoorCanvas.Controllers.HostController COPILOT-DEBUG: [cd982fe4] [COUNTRIES-API] Executing SQL query against KSESSIONS database {"ActionId":"cb357e1f-eb89-42dd-befb-7918cbcfc9be","ActionName":"NoorCanvas.Controllers.HostController.GetCountries (NoorCanvas)","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9B59HAC5"}
[2025-09-20 09:37:21.816 -04:00 ERR] Microsoft.EntityFrameworkCore.Database.Command Failed executing DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CountryID, CountryName, ISO2, ISO3, CAST(ISNULL(IsActive, 0) AS BIT) AS IsActive FROM dbo.Countries ORDER BY CountryName {"EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"ActionId":"cb357e1f-eb89-42dd-befb-7918cbcfc9be","ActionName":"NoorCanvas.Controllers.HostController.GetCountries (NoorCanvas)","RequestId":"0HNFO9B59HAC5:00000002","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9B59HAC5"}
[2025-09-20 09:37:21.825 -04:00 ERR] Microsoft.EntityFrameworkCore.Query An exception occurred while iterating over the results of a query for context type 'NoorCanvas.Data.KSessionsDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'dbo.Countries'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.FromSqlQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.FromSqlQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:0bd4f02d-2486-412f-8c50-7d46076ba32f
Error Number:208,State:1,Class:16 {"EventId":{"Id":10100,"Name":"Microsoft.EntityFrameworkCore.Query.QueryIterationFailed"},"ActionId":"cb357e1f-eb89-42dd-befb-7918cbcfc9be","ActionName":"NoorCanvas.Controllers.HostController.GetCountries (NoorCanvas)","RequestId":"0HNFO9B59HAC5:00000002","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9B59HAC5"}
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'dbo.Countries'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.FromSqlQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.FromSqlQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:0bd4f02d-2486-412f-8c50-7d46076ba32f
Error Number:208,State:1,Class:16
[2025-09-20 09:37:21.844 -04:00 ERR] NoorCanvas.Controllers.HostController COPILOT-DEBUG: [cd982fe4] [COUNTRIES-API] EXCEPTION during countries loading {"ActionId":"cb357e1f-eb89-42dd-befb-7918cbcfc9be","ActionName":"NoorCanvas.Controllers.HostController.GetCountries (NoorCanvas)","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9B59HAC5"}
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'dbo.Countries'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.FromSqlQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.FromSqlQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at NoorCanvas.Controllers.HostController.GetCountries(String guid) in D:\PROJECTS\NOOR CANVAS\SPA\NoorCanvas\Controllers\HostController.cs:line 768
ClientConnectionId:0bd4f02d-2486-412f-8c50-7d46076ba32f
Error Number:208,State:1,Class:16
[2025-09-20 09:37:21.860 -04:00 ERR] NoorCanvas.Controllers.HostController COPILOT-DEBUG: [cd982fe4] [COUNTRIES-API] Exception Type: SqlException, Message: Invalid object name 'dbo.Countries'. {"ActionId":"cb357e1f-eb89-42dd-befb-7918cbcfc9be","ActionName":"NoorCanvas.Controllers.HostController.GetCountries (NoorCanvas)","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9B59HAC5"}
[2025-09-20 09:37:21.867 -04:00 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor Executing ObjectResult, writing value of type '<>f__AnonymousType25`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'. {"EventId":{"Id":1,"Name":"ObjectResultExecuting"},"ActionId":"cb357e1f-eb89-42dd-befb-7918cbcfc9be","ActionName":"NoorCanvas.Controllers.HostController.GetCountries (NoorCanvas)","RequestId":"0HNFO9B59HAC5:00000002","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9B59HAC5"}
[2025-09-20 09:37:21.875 -04:00 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Executed action NoorCanvas.Controllers.HostController.GetCountries (NoorCanvas) in 85.2801ms {"EventId":{"Id":105,"Name":"ActionExecuted"},"RequestId":"0HNFO9B59HAC5:00000002","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9B59HAC5"}
[2025-09-20 09:37:21.875 -04:00 INF] System.Net.Http.HttpClient.default.ClientHandler Received HTTP response headers after 124.5315ms - 500 {"EventId":{"Id":101,"Name":"RequestEnd"},"HttpMethod":"GET","Uri":"https://localhost:9091/api/host/countries?guid=USER212B","TransportConnectionId":"rj_kFstAGlOR9tmJMtoCvQ","RequestId":"0HNFO9B59HAC2:0000000F","RequestPath":"/_blazor","ConnectionId":"0HNFO9B59HAC2","Scope":["HTTP GET https://localhost:9091/api/host/countries?guid=USER212B"]}
[2025-09-20 09:37:21.888 -04:00 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware Executed endpoint 'NoorCanvas.Controllers.HostController.GetCountries (NoorCanvas)' {"EventId":{"Id":1,"Name":"ExecutedEndpoint"},"RequestId":"0HNFO9B59HAC5:00000002","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9B59HAC5"}
[2025-09-20 09:37:21.894 -04:00 INF] System.Net.Http.HttpClient.default.LogicalHandler End processing HTTP request after 170.1248ms - 500 {"EventId":{"Id":101,"Name":"RequestPipelineEnd"},"HttpMethod":"GET","Uri":"https://localhost:9091/api/host/countries?guid=USER212B","TransportConnectionId":"rj_kFstAGlOR9tmJMtoCvQ","RequestId":"0HNFO9B59HAC2:0000000F","RequestPath":"/_blazor","ConnectionId":"0HNFO9B59HAC2","Scope":["HTTP GET https://localhost:9091/api/host/countries?guid=USER212B"]}
[2025-09-20 09:37:21.907 -04:00 INF] NoorCanvas.Services.DebugService NOOR_DEBUG: [HTTP_MIDDLEWARE] Request Completed | CorrelationId: ac10098d | Data: {"StatusCode":500,"ContentType":"application/json; charset=utf-8","ContentLength":null,"DurationMs":138} {"RequestId":"0HNFO9B59HAC5:00000002","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9B59HAC5"}
[2025-09-20 09:37:21.919 -04:00 INF] NoorCanvas.Services.DebugService NOOR_DEBUG: [PERFORMANCE] Operation Completed: HTTP_GET_/api/host/countries | Data: {"DurationMs":138.0995,"Component":"HTTP_MIDDLEWARE"} {"RequestId":"0HNFO9B59HAC5:00000002","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9B59HAC5"}
[2025-09-20 09:37:21.924 -04:00 INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/1.1 GET https://localhost:9091/api/host/countries?guid=USER212B - 500 null application/json; charset=utf-8 172.5538ms {"EventId":{"Id":2},"RequestId":"0HNFO9B59HAC5:00000002","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9B59HAC5"}
[2025-09-20 09:37:21.924 -04:00 INF] NoorCanvas.Pages.UserLanding COPILOT-DEBUG: [757273d0] [COUNTRIES] API response: "InternalServerError" {"TransportConnectionId":"rj_kFstAGlOR9tmJMtoCvQ","RequestPath":"/_blazor","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:21.937 -04:00 WRN] NoorCanvas.Pages.UserLanding COPILOT-DEBUG: [757273d0] [COUNTRIES] Failed to load countries - HTTP "InternalServerError" {"TransportConnectionId":"rj_kFstAGlOR9tmJMtoCvQ","RequestPath":"/_blazor","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:21.944 -04:00 DBG] Microsoft.AspNetCore.SignalR.Internal.DefaultHubDispatcher Received hub invocation: InvocationMessage { InvocationId: "", Target: "OnRenderCompleted", Arguments: [ 4,  ], StreamIds: [  ] }. {"EventId":{"Id":1,"Name":"ReceivedHubInvocation"},"TransportConnectionId":"rj_kFstAGlOR9tmJMtoCvQ","RequestId":"0HNFO9B59HAC2:0000000F","RequestPath":"/_blazor","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:21.946 -04:00 INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/2 GET https://localhost:9091/images/branding/NC-Header.png?v=638939578419420910 - null null {"EventId":{"Id":1},"RequestId":"0HNFO9B59HAC2:00000015","RequestPath":"/images/branding/NC-Header.png","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:21.948 -04:00 INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/2 GET https://localhost:9091/images/branding/NC-Header.png?v=638939578419427449 - null null {"EventId":{"Id":1},"RequestId":"0HNFO9B59HAC2:00000017","RequestPath":"/images/branding/NC-Header.png","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:21.964 -04:00 DBG] Microsoft.AspNetCore.SignalR.Internal.DefaultHubDispatcher Received hub invocation: InvocationMessage { InvocationId: "", Target: "OnRenderCompleted", Arguments: [ 5,  ], StreamIds: [  ] }. {"EventId":{"Id":1,"Name":"ReceivedHubInvocation"},"TransportConnectionId":"rj_kFstAGlOR9tmJMtoCvQ","RequestId":"0HNFO9B59HAC2:0000000F","RequestPath":"/_blazor","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:21.968 -04:00 INF] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '/images/branding/NC-Header.png'. Physical path: 'D:\PROJECTS\NOOR CANVAS\SPA\NoorCanvas\wwwroot\images\branding\NC-Header.png' {"EventId":{"Id":2,"Name":"FileServed"},"RequestId":"0HNFO9B59HAC2:00000015","RequestPath":"/images/branding/NC-Header.png","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:21.988 -04:00 INF] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '/images/branding/NC-Header.png'. Physical path: 'D:\PROJECTS\NOOR CANVAS\SPA\NoorCanvas\wwwroot\images\branding\NC-Header.png' {"EventId":{"Id":2,"Name":"FileServed"},"RequestId":"0HNFO9B59HAC2:00000017","RequestPath":"/images/branding/NC-Header.png","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:21.994 -04:00 INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/2 GET https://localhost:9091/images/branding/NC-Header.png?v=638939578419420910 - 499 1769400 image/png 47.8528ms {"EventId":{"Id":2},"RequestId":"0HNFO9B59HAC2:00000015","RequestPath":"/images/branding/NC-Header.png","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:22.005 -04:00 INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/2 GET https://localhost:9091/images/branding/NC-Header.png?v=638939578419427449 - 200 1769400 image/png 56.9282ms {"EventId":{"Id":2},"RequestId":"0HNFO9B59HAC2:00000017","RequestPath":"/images/branding/NC-Header.png","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:27.106 -04:00 DBG] Microsoft.AspNetCore.SignalR.Internal.DefaultHubDispatcher Received hub invocation: InvocationMessage { InvocationId: "", Target: "BeginInvokeDotNetFromJS", Arguments: [ 1, , DispatchEventAsync, 1, [{"eventHandlerId":8,"eventName":"focus","eventFieldInfo":{"componentId":13,"fieldValue":""}},{"type":"focus"}] ], StreamIds: [  ] }. {"EventId":{"Id":1,"Name":"ReceivedHubInvocation"},"TransportConnectionId":"rj_kFstAGlOR9tmJMtoCvQ","RequestId":"0HNFO9B59HAC2:0000000F","RequestPath":"/_blazor","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:27.124 -04:00 DBG] Microsoft.AspNetCore.SignalR.Internal.DefaultHubDispatcher Received hub invocation: InvocationMessage { InvocationId: "", Target: "OnRenderCompleted", Arguments: [ 6,  ], StreamIds: [  ] }. {"EventId":{"Id":1,"Name":"ReceivedHubInvocation"},"TransportConnectionId":"rj_kFstAGlOR9tmJMtoCvQ","RequestId":"0HNFO9B59HAC2:0000000F","RequestPath":"/_blazor","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:27.147 -04:00 INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/2 GET https://localhost:9091/images/branding/NC-Header.png?v=638939578471223663 - null null {"EventId":{"Id":1},"RequestId":"0HNFO9B59HAC2:00000019","RequestPath":"/images/branding/NC-Header.png","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:27.178 -04:00 INF] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '/images/branding/NC-Header.png'. Physical path: 'D:\PROJECTS\NOOR CANVAS\SPA\NoorCanvas\wwwroot\images\branding\NC-Header.png' {"EventId":{"Id":2,"Name":"FileServed"},"RequestId":"0HNFO9B59HAC2:00000019","RequestPath":"/images/branding/NC-Header.png","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:27.186 -04:00 INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/2 GET https://localhost:9091/images/branding/NC-Header.png?v=638939578471223663 - 200 1769400 image/png 39.4253ms {"EventId":{"Id":2},"RequestId":"0HNFO9B59HAC2:00000019","RequestPath":"/images/branding/NC-Header.png","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:32.439 -04:00 DBG] Microsoft.AspNetCore.SignalR.Internal.DefaultHubDispatcher Received hub invocation: InvocationMessage { InvocationId: "", Target: "BeginInvokeDotNetFromJS", Arguments: [ 2, , DispatchEventAsync, 1, [{"eventHandlerId":8,"eventName":"focus","eventFieldInfo":{"componentId":13,"fieldValue":""}},{"type":"focus"}] ], StreamIds: [  ] }. {"EventId":{"Id":1,"Name":"ReceivedHubInvocation"},"TransportConnectionId":"rj_kFstAGlOR9tmJMtoCvQ","RequestId":"0HNFO9B59HAC2:0000000F","RequestPath":"/_blazor","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:32.449 -04:00 DBG] Microsoft.AspNetCore.SignalR.Internal.DefaultHubDispatcher Received hub invocation: InvocationMessage { InvocationId: "", Target: "OnRenderCompleted", Arguments: [ 7,  ], StreamIds: [  ] }. {"EventId":{"Id":1,"Name":"ReceivedHubInvocation"},"TransportConnectionId":"rj_kFstAGlOR9tmJMtoCvQ","RequestId":"0HNFO9B59HAC2:0000000F","RequestPath":"/_blazor","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:32.472 -04:00 INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/2 GET https://localhost:9091/images/branding/NC-Header.png?v=638939578524475262 - null null {"EventId":{"Id":1},"RequestId":"0HNFO9B59HAC2:0000001B","RequestPath":"/images/branding/NC-Header.png","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:32.494 -04:00 INF] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '/images/branding/NC-Header.png'. Physical path: 'D:\PROJECTS\NOOR CANVAS\SPA\NoorCanvas\wwwroot\images\branding\NC-Header.png' {"EventId":{"Id":2,"Name":"FileServed"},"RequestId":"0HNFO9B59HAC2:0000001B","RequestPath":"/images/branding/NC-Header.png","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:32.502 -04:00 INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/2 GET https://localhost:9091/images/branding/NC-Header.png?v=638939578524475262 - 200 1769400 image/png 29.921ms {"EventId":{"Id":2},"RequestId":"0HNFO9B59HAC2:0000001B","RequestPath":"/images/branding/NC-Header.png","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:35.915 -04:00 DBG] Microsoft.AspNetCore.SignalR.Internal.DefaultHubDispatcher Received hub invocation: InvocationMessage { InvocationId: "", Target: "BeginInvokeDotNetFromJS", Arguments: [ 3, , DispatchEventAsync, 1, [{"eventHandlerId":8,"eventName":"focus","eventFieldInfo":{"componentId":13,"fieldValue":""}},{"type":"focus"}] ], StreamIds: [  ] }. {"EventId":{"Id":1,"Name":"ReceivedHubInvocation"},"TransportConnectionId":"rj_kFstAGlOR9tmJMtoCvQ","RequestId":"0HNFO9B59HAC2:0000000F","RequestPath":"/_blazor","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:35.967 -04:00 DBG] Microsoft.AspNetCore.SignalR.Internal.DefaultHubDispatcher Received hub invocation: InvocationMessage { InvocationId: "", Target: "OnRenderCompleted", Arguments: [ 8,  ], StreamIds: [  ] }. {"EventId":{"Id":1,"Name":"ReceivedHubInvocation"},"TransportConnectionId":"rj_kFstAGlOR9tmJMtoCvQ","RequestId":"0HNFO9B59HAC2:0000000F","RequestPath":"/_blazor","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:35.971 -04:00 INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/2 GET https://localhost:9091/images/branding/NC-Header.png?v=638939578559601666 - null null {"EventId":{"Id":1},"RequestId":"0HNFO9B59HAC2:0000001D","RequestPath":"/images/branding/NC-Header.png","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:36.032 -04:00 INF] Microsoft.AspNetCore.StaticFiles.StaticFileMiddleware Sending file. Request path: '/images/branding/NC-Header.png'. Physical path: 'D:\PROJECTS\NOOR CANVAS\SPA\NoorCanvas\wwwroot\images\branding\NC-Header.png' {"EventId":{"Id":2,"Name":"FileServed"},"RequestId":"0HNFO9B59HAC2:0000001D","RequestPath":"/images/branding/NC-Header.png","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:37:36.050 -04:00 INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/2 GET https://localhost:9091/images/branding/NC-Header.png?v=638939578559601666 - 200 1769400 image/png 78.9263ms {"EventId":{"Id":2},"RequestId":"0HNFO9B59HAC2:0000001D","RequestPath":"/images/branding/NC-Header.png","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:38:57.537 -04:00 INF] Microsoft.Hosting.Lifetime Application is shutting down... {}
[2025-09-20 09:38:57.547 -04:00 DBG] Microsoft.AspNetCore.SignalR.HubConnectionHandler OnConnectedAsync ending. {"EventId":{"Id":6,"Name":"ConnectedEnding"},"TransportConnectionId":"rj_kFstAGlOR9tmJMtoCvQ","RequestId":"0HNFO9B59HAC2:0000000F","RequestPath":"/_blazor","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:38:57.555 -04:00 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware Executed endpoint '/_blazor' {"EventId":{"Id":1,"Name":"ExecutedEndpoint"},"RequestId":"0HNFO9B59HAC2:0000000F","RequestPath":"/_blazor","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:38:57.564 -04:00 INF] NoorCanvas.Services.DebugService NOOR_DEBUG: [HTTP_MIDDLEWARE] Request Completed | CorrelationId: 1ee0702b | Data: {"StatusCode":200,"ContentType":null,"ContentLength":null,"DurationMs":96379} {"RequestId":"0HNFO9B59HAC2:0000000F","RequestPath":"/_blazor","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:38:57.568 -04:00 INF] NoorCanvas.Services.DebugService NOOR_DEBUG: [PERFORMANCE] CRITICAL SLOW OPERATION: HTTP_CONNECT_/_blazor | Data: {"DurationMs":96379.8261,"ThresholdMs":5000,"Component":"HTTP_MIDDLEWARE"} {"RequestId":"0HNFO9B59HAC2:0000000F","RequestPath":"/_blazor","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:38:57.573 -04:00 INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/2 CONNECT https://localhost:9091/_blazor?id=2kBUNp2HbIGj2ymQxbtFRg - 200 null null 96404.7344ms {"EventId":{"Id":2},"RequestId":"0HNFO9B59HAC2:0000000F","RequestPath":"/_blazor","ConnectionId":"0HNFO9B59HAC2"}
[2025-09-20 09:38:57.585 -04:00 INF] Microsoft.AspNetCore.Server.Kestrel Connection id "0HNFO9B59HAC2", Request id "0HNFO9B59HAC2:0000000F": the application completed without reading the entire request body. {"EventId":{"Id":32,"Name":"RequestBodyNotEntirelyRead"}}
[2025-09-20 09:49:46.122 -04:00 INF] Program ✅ NOOR-VALIDATION: HttpClient BaseAddress configured: "https://localhost:9091/" {}
[2025-09-20 09:49:47.457 -04:00 INF] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"}}
[2025-09-20 09:49:47.470 -04:00 INF] Program ✅ NOOR-VALIDATION: Canvas database connection verified {}
[2025-09-20 09:49:47.472 -04:00 INF] Program ✅ NOOR-VALIDATION: All critical configurations validated successfully {}
[2025-09-20 09:49:47.525 -04:00 INF] Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager User profile is available. Using 'C:\Users\asifh\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest. {"EventId":{"Id":63,"Name":"UsingProfileAsKeyRepositoryWithDPAPI"}}
[2025-09-20 09:49:47.625 -04:00 DBG] Microsoft.AspNetCore.SignalR.Internal.DefaultHubProtocolResolver Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol. {"EventId":{"Id":1,"Name":"RegisteredSignalRProtocol"}}
[2025-09-20 09:49:47.632 -04:00 DBG] Microsoft.AspNetCore.SignalR.Internal.DefaultHubProtocolResolver Registered SignalR Protocol: blazorpack, implemented by Microsoft.AspNetCore.Components.Server.BlazorPack.BlazorPackHubProtocol. {"EventId":{"Id":1,"Name":"RegisteredSignalRProtocol"}}
[2025-09-20 09:49:47.776 -04:00 INF]  NOOR-STARTUP: NOOR Canvas Phase 1 application starting {}
[2025-09-20 09:49:47.897 -04:00 WRN] Microsoft.AspNetCore.Server.Kestrel Overriding address(es) 'https://localhost:8443, http://localhost:9090'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead. {}
[2025-09-20 09:49:47.942 -04:00 INF] Microsoft.Hosting.Lifetime Now listening on: http://localhost:9090 {"EventId":{"Id":14,"Name":"ListeningOnAddress"}}
[2025-09-20 09:49:47.950 -04:00 INF] Microsoft.Hosting.Lifetime Now listening on: https://localhost:9091 {"EventId":{"Id":14,"Name":"ListeningOnAddress"}}
[2025-09-20 09:49:47.955 -04:00 INF] Microsoft.Hosting.Lifetime Application started. Press Ctrl+C to shut down. {}
[2025-09-20 09:49:47.957 -04:00 INF] Microsoft.Hosting.Lifetime Hosting environment: Development {}
[2025-09-20 09:49:47.960 -04:00 INF] Microsoft.Hosting.Lifetime Content root path: D:\PROJECTS\NOOR CANVAS\SPA\NoorCanvas {}
[2025-09-20 09:50:43.302 -04:00 INF] Microsoft.Hosting.Lifetime Application is shutting down... {}
[2025-09-20 09:50:56.705 -04:00 INF] Program ✅ NOOR-VALIDATION: HttpClient BaseAddress configured: "https://localhost:9091/" {}
[2025-09-20 09:50:57.993 -04:00 INF] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand (66ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"}}
[2025-09-20 09:50:58.023 -04:00 INF] Program ✅ NOOR-VALIDATION: Canvas database connection verified {}
[2025-09-20 09:50:58.026 -04:00 INF] Program ✅ NOOR-VALIDATION: All critical configurations validated successfully {}
[2025-09-20 09:50:58.089 -04:00 INF] Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager User profile is available. Using 'C:\Users\asifh\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest. {"EventId":{"Id":63,"Name":"UsingProfileAsKeyRepositoryWithDPAPI"}}
[2025-09-20 09:50:58.175 -04:00 DBG] Microsoft.AspNetCore.SignalR.Internal.DefaultHubProtocolResolver Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol. {"EventId":{"Id":1,"Name":"RegisteredSignalRProtocol"}}
[2025-09-20 09:50:58.180 -04:00 DBG] Microsoft.AspNetCore.SignalR.Internal.DefaultHubProtocolResolver Registered SignalR Protocol: blazorpack, implemented by Microsoft.AspNetCore.Components.Server.BlazorPack.BlazorPackHubProtocol. {"EventId":{"Id":1,"Name":"RegisteredSignalRProtocol"}}
[2025-09-20 09:50:58.276 -04:00 INF]  NOOR-STARTUP: NOOR Canvas Phase 1 application starting {}
[2025-09-20 09:50:58.375 -04:00 WRN] Microsoft.AspNetCore.Server.Kestrel Overriding address(es) 'https://localhost:8443, http://localhost:9090'. Binding to endpoints defined via IConfiguration and/or UseKestrel() instead. {}
[2025-09-20 09:50:58.407 -04:00 INF] Microsoft.Hosting.Lifetime Now listening on: http://localhost:9090 {"EventId":{"Id":14,"Name":"ListeningOnAddress"}}
[2025-09-20 09:50:58.412 -04:00 INF] Microsoft.Hosting.Lifetime Now listening on: https://localhost:9091 {"EventId":{"Id":14,"Name":"ListeningOnAddress"}}
[2025-09-20 09:50:58.416 -04:00 INF] Microsoft.Hosting.Lifetime Application started. Press Ctrl+C to shut down. {}
[2025-09-20 09:50:58.418 -04:00 INF] Microsoft.Hosting.Lifetime Hosting environment: Development {}
[2025-09-20 09:50:58.420 -04:00 INF] Microsoft.Hosting.Lifetime Content root path: D:\PROJECTS\NOOR CANVAS\SPA\NoorCanvas {}
[2025-09-20 09:51:21.430 -04:00 INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/1.1 GET https://localhost:9091/api/host/countries?guid=USER212B - null null {"EventId":{"Id":1},"RequestId":"0HNFO9J40F4CM:00000001","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9J40F4CM"}
[2025-09-20 09:51:21.532 -04:00 INF] NoorCanvas.Services.DebugService NOOR_DEBUG: [HTTP_MIDDLEWARE] Request Started | CorrelationId: 90730360 | Data: {"Method":"GET","Path":{"Value":"/api/host/countries","HasValue":true},"QueryString":"?guid=USER212B","UserAgent":"Mozilla/5.0 (Windows NT; Windows NT 10.0; en-US) WindowsPowerShell/5.1.19041.6328","RemoteIP":"::1","ContentType":null,"ContentLength":null} {"RequestId":"0HNFO9J40F4CM:00000001","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9J40F4CM"}
[2025-09-20 09:51:21.584 -04:00 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware Executing endpoint 'NoorCanvas.Controllers.HostController.GetCountries (NoorCanvas)' {"EventId":{"Name":"ExecutingEndpoint"},"RequestId":"0HNFO9J40F4CM:00000001","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9J40F4CM"}
[2025-09-20 09:51:21.618 -04:00 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Route matched with {action = "GetCountries", controller = "Host", page = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCountries(System.String) on controller NoorCanvas.Controllers.HostController (NoorCanvas). {"EventId":{"Id":102,"Name":"ControllerActionExecuting"},"ActionId":"a6c05142-eb16-4888-9905-d1c81a8f4d08","ActionName":"NoorCanvas.Controllers.HostController.GetCountries (NoorCanvas)","RequestId":"0HNFO9J40F4CM:00000001","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9J40F4CM"}
[2025-09-20 09:51:21.650 -04:00 INF] NoorCanvas.Controllers.HostController COPILOT-DEBUG: [12d91db0] [COUNTRIES-API] Countries request started {"ActionId":"a6c05142-eb16-4888-9905-d1c81a8f4d08","ActionName":"NoorCanvas.Controllers.HostController.GetCountries (NoorCanvas)","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9J40F4CM"}
[2025-09-20 09:51:21.656 -04:00 INF] NoorCanvas.Controllers.HostController COPILOT-DEBUG: [12d91db0] [COUNTRIES-API] Token: USER212B, ClientIP: ::1, UserAgent: Mozilla/5.0 (Windows NT; Windows NT 10.0; en-US) WindowsPowerShell/5.1.19041.6328 {"ActionId":"a6c05142-eb16-4888-9905-d1c81a8f4d08","ActionName":"NoorCanvas.Controllers.HostController.GetCountries (NoorCanvas)","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9J40F4CM"}
[2025-09-20 09:51:21.663 -04:00 INF] NoorCanvas.Controllers.HostController COPILOT-DEBUG: [12d91db0] [COUNTRIES-API] Querying Countries from KSESSIONS DbSet {"ActionId":"a6c05142-eb16-4888-9905-d1c81a8f4d08","ActionName":"NoorCanvas.Controllers.HostController.GetCountries (NoorCanvas)","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9J40F4CM"}
[2025-09-20 09:51:21.950 -04:00 INF] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CountryId] AS [CountryID], [c].[CountryName], [c].[ISO2], [c].[ISO3], [c].[IsActive]
FROM [dbo].[Countries] AS [c]
ORDER BY [c].[CountryName] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"ActionId":"a6c05142-eb16-4888-9905-d1c81a8f4d08","ActionName":"NoorCanvas.Controllers.HostController.GetCountries (NoorCanvas)","RequestId":"0HNFO9J40F4CM:00000001","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9J40F4CM"}
[2025-09-20 09:51:21.983 -04:00 INF] NoorCanvas.Controllers.HostController COPILOT-DEBUG: [12d91db0] [COUNTRIES-API] Countries query completed successfully {"ActionId":"a6c05142-eb16-4888-9905-d1c81a8f4d08","ActionName":"NoorCanvas.Controllers.HostController.GetCountries (NoorCanvas)","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9J40F4CM"}
[2025-09-20 09:51:21.989 -04:00 INF] NoorCanvas.Controllers.HostController COPILOT-DEBUG: [12d91db0] [COUNTRIES-API] Loaded 245 countries from KSESSIONS database {"ActionId":"a6c05142-eb16-4888-9905-d1c81a8f4d08","ActionName":"NoorCanvas.Controllers.HostController.GetCountries (NoorCanvas)","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9J40F4CM"}
[2025-09-20 09:51:21.996 -04:00 INF] NoorCanvas.Controllers.HostController COPILOT-DEBUG: [12d91db0] [COUNTRIES-API] Sample countries: Afghanistan (AF), Albania (AL), Algeria (DZ) {"ActionId":"a6c05142-eb16-4888-9905-d1c81a8f4d08","ActionName":"NoorCanvas.Controllers.HostController.GetCountries (NoorCanvas)","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9J40F4CM"}
[2025-09-20 09:51:22.005 -04:00 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[NoorCanvas.Controllers.CountryData, NoorCanvas, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'. {"EventId":{"Id":1,"Name":"ObjectResultExecuting"},"ActionId":"a6c05142-eb16-4888-9905-d1c81a8f4d08","ActionName":"NoorCanvas.Controllers.HostController.GetCountries (NoorCanvas)","RequestId":"0HNFO9J40F4CM:00000001","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9J40F4CM"}
[2025-09-20 09:51:22.031 -04:00 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Executed action NoorCanvas.Controllers.HostController.GetCountries (NoorCanvas) in 399.7914ms {"EventId":{"Id":105,"Name":"ActionExecuted"},"RequestId":"0HNFO9J40F4CM:00000001","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9J40F4CM"}
[2025-09-20 09:51:22.042 -04:00 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware Executed endpoint 'NoorCanvas.Controllers.HostController.GetCountries (NoorCanvas)' {"EventId":{"Id":1,"Name":"ExecutedEndpoint"},"RequestId":"0HNFO9J40F4CM:00000001","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9J40F4CM"}
[2025-09-20 09:51:22.054 -04:00 INF] NoorCanvas.Services.DebugService NOOR_DEBUG: [HTTP_MIDDLEWARE] Request Completed | CorrelationId: 90730360 | Data: {"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"DurationMs":567} {"RequestId":"0HNFO9J40F4CM:00000001","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9J40F4CM"}
[2025-09-20 09:51:22.066 -04:00 INF] NoorCanvas.Services.DebugService NOOR_DEBUG: [PERFORMANCE] Operation Completed: HTTP_GET_/api/host/countries | Data: {"DurationMs":567.9937,"Component":"HTTP_MIDDLEWARE"} {"RequestId":"0HNFO9J40F4CM:00000001","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9J40F4CM"}
[2025-09-20 09:51:22.076 -04:00 INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/1.1 GET https://localhost:9091/api/host/countries?guid=USER212B - 200 null application/json; charset=utf-8 648.4934ms {"EventId":{"Id":2},"RequestId":"0HNFO9J40F4CM:00000001","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9J40F4CM"}
[2025-09-20 09:51:36.602 -04:00 INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/1.1 GET https://localhost:9091/api/host/countries?guid=USER212B - null null {"EventId":{"Id":1},"RequestId":"0HNFO9J40F4CM:00000002","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9J40F4CM"}
[2025-09-20 09:51:36.619 -04:00 INF] NoorCanvas.Services.DebugService NOOR_DEBUG: [HTTP_MIDDLEWARE] Request Started | CorrelationId: 0a3f198f | Data: {"Method":"GET","Path":{"Value":"/api/host/countries","HasValue":true},"QueryString":"?guid=USER212B","UserAgent":"Mozilla/5.0 (Windows NT; Windows NT 10.0; en-US) WindowsPowerShell/5.1.19041.6328","RemoteIP":"::1","ContentType":null,"ContentLength":null} {"RequestId":"0HNFO9J40F4CM:00000002","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9J40F4CM"}
[2025-09-20 09:51:36.628 -04:00 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware Executing endpoint 'NoorCanvas.Controllers.HostController.GetCountries (NoorCanvas)' {"EventId":{"Name":"ExecutingEndpoint"},"RequestId":"0HNFO9J40F4CM:00000002","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9J40F4CM"}
[2025-09-20 09:51:36.634 -04:00 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Route matched with {action = "GetCountries", controller = "Host", page = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCountries(System.String) on controller NoorCanvas.Controllers.HostController (NoorCanvas). {"EventId":{"Id":102,"Name":"ControllerActionExecuting"},"ActionId":"a6c05142-eb16-4888-9905-d1c81a8f4d08","ActionName":"NoorCanvas.Controllers.HostController.GetCountries (NoorCanvas)","RequestId":"0HNFO9J40F4CM:00000002","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9J40F4CM"}
[2025-09-20 09:51:36.648 -04:00 INF] NoorCanvas.Controllers.HostController COPILOT-DEBUG: [00a9d5d6] [COUNTRIES-API] Countries request started {"ActionId":"a6c05142-eb16-4888-9905-d1c81a8f4d08","ActionName":"NoorCanvas.Controllers.HostController.GetCountries (NoorCanvas)","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9J40F4CM"}
[2025-09-20 09:51:36.654 -04:00 INF] NoorCanvas.Controllers.HostController COPILOT-DEBUG: [00a9d5d6] [COUNTRIES-API] Token: USER212B, ClientIP: ::1, UserAgent: Mozilla/5.0 (Windows NT; Windows NT 10.0; en-US) WindowsPowerShell/5.1.19041.6328 {"ActionId":"a6c05142-eb16-4888-9905-d1c81a8f4d08","ActionName":"NoorCanvas.Controllers.HostController.GetCountries (NoorCanvas)","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9J40F4CM"}
[2025-09-20 09:51:36.662 -04:00 INF] NoorCanvas.Controllers.HostController COPILOT-DEBUG: [00a9d5d6] [COUNTRIES-API] Querying Countries from KSESSIONS DbSet {"ActionId":"a6c05142-eb16-4888-9905-d1c81a8f4d08","ActionName":"NoorCanvas.Controllers.HostController.GetCountries (NoorCanvas)","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9J40F4CM"}
[2025-09-20 09:51:36.744 -04:00 INF] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CountryId] AS [CountryID], [c].[CountryName], [c].[ISO2], [c].[ISO3], [c].[IsActive]
FROM [dbo].[Countries] AS [c]
ORDER BY [c].[CountryName] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"ActionId":"a6c05142-eb16-4888-9905-d1c81a8f4d08","ActionName":"NoorCanvas.Controllers.HostController.GetCountries (NoorCanvas)","RequestId":"0HNFO9J40F4CM:00000002","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9J40F4CM"}
[2025-09-20 09:51:36.760 -04:00 INF] NoorCanvas.Controllers.HostController COPILOT-DEBUG: [00a9d5d6] [COUNTRIES-API] Countries query completed successfully {"ActionId":"a6c05142-eb16-4888-9905-d1c81a8f4d08","ActionName":"NoorCanvas.Controllers.HostController.GetCountries (NoorCanvas)","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9J40F4CM"}
[2025-09-20 09:51:36.767 -04:00 INF] NoorCanvas.Controllers.HostController COPILOT-DEBUG: [00a9d5d6] [COUNTRIES-API] Loaded 245 countries from KSESSIONS database {"ActionId":"a6c05142-eb16-4888-9905-d1c81a8f4d08","ActionName":"NoorCanvas.Controllers.HostController.GetCountries (NoorCanvas)","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9J40F4CM"}
[2025-09-20 09:51:36.861 -04:00 INF] NoorCanvas.Controllers.HostController COPILOT-DEBUG: [00a9d5d6] [COUNTRIES-API] Sample countries: Afghanistan (AF), Albania (AL), Algeria (DZ) {"ActionId":"a6c05142-eb16-4888-9905-d1c81a8f4d08","ActionName":"NoorCanvas.Controllers.HostController.GetCountries (NoorCanvas)","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9J40F4CM"}
[2025-09-20 09:51:36.868 -04:00 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[NoorCanvas.Controllers.CountryData, NoorCanvas, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'. {"EventId":{"Id":1,"Name":"ObjectResultExecuting"},"ActionId":"a6c05142-eb16-4888-9905-d1c81a8f4d08","ActionName":"NoorCanvas.Controllers.HostController.GetCountries (NoorCanvas)","RequestId":"0HNFO9J40F4CM:00000002","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9J40F4CM"}
[2025-09-20 09:51:36.890 -04:00 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Executed action NoorCanvas.Controllers.HostController.GetCountries (NoorCanvas) in 244.0199ms {"EventId":{"Id":105,"Name":"ActionExecuted"},"RequestId":"0HNFO9J40F4CM:00000002","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9J40F4CM"}
[2025-09-20 09:51:36.897 -04:00 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware Executed endpoint 'NoorCanvas.Controllers.HostController.GetCountries (NoorCanvas)' {"EventId":{"Id":1,"Name":"ExecutedEndpoint"},"RequestId":"0HNFO9J40F4CM:00000002","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9J40F4CM"}
[2025-09-20 09:51:36.904 -04:00 INF] NoorCanvas.Services.DebugService NOOR_DEBUG: [HTTP_MIDDLEWARE] Request Completed | CorrelationId: 0a3f198f | Data: {"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"DurationMs":285} {"RequestId":"0HNFO9J40F4CM:00000002","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9J40F4CM"}
[2025-09-20 09:51:36.910 -04:00 INF] NoorCanvas.Services.DebugService NOOR_DEBUG: [PERFORMANCE] Operation Completed: HTTP_GET_/api/host/countries | Data: {"DurationMs":285.6896,"Component":"HTTP_MIDDLEWARE"} {"RequestId":"0HNFO9J40F4CM:00000002","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9J40F4CM"}
[2025-09-20 09:51:36.915 -04:00 INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/1.1 GET https://localhost:9091/api/host/countries?guid=USER212B - 200 null application/json; charset=utf-8 312.9583ms {"EventId":{"Id":2},"RequestId":"0HNFO9J40F4CM:00000002","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9J40F4CM"}
[2025-09-20 09:52:04.477 -04:00 INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/1.1 GET https://localhost:9091/user/landing/USER212B - null null {"EventId":{"Id":1},"RequestId":"0HNFO9J40F4CM:00000003","RequestPath":"/user/landing/USER212B","ConnectionId":"0HNFO9J40F4CM"}
[2025-09-20 09:52:04.488 -04:00 INF] NoorCanvas.Services.DebugService NOOR_DEBUG: [HTTP_MIDDLEWARE] Request Started | CorrelationId: aeb7b08b | Data: {"Method":"GET","Path":{"Value":"/user/landing/USER212B","HasValue":true},"QueryString":"","UserAgent":"Mozilla/5.0 (Windows NT; Windows NT 10.0; en-US) WindowsPowerShell/5.1.19041.6328","RemoteIP":"::1","ContentType":null,"ContentLength":null} {"RequestId":"0HNFO9J40F4CM:00000003","RequestPath":"/user/landing/USER212B","ConnectionId":"0HNFO9J40F4CM"}
[2025-09-20 09:52:04.494 -04:00 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware Executing endpoint '/_Host' {"EventId":{"Name":"ExecutingEndpoint"},"RequestId":"0HNFO9J40F4CM:00000003","RequestPath":"/user/landing/USER212B","ConnectionId":"0HNFO9J40F4CM"}
[2025-09-20 09:52:04.504 -04:00 INF] Microsoft.AspNetCore.Mvc.RazorPages.Infrastructure.PageActionInvoker Route matched with {page = "/_Host", action = "", controller = ""}. Executing page /_Host {"EventId":{"Id":103,"Name":"PageExecuting"},"ActionId":"0701dfb2-10f4-407a-81ca-32fbb26ec05c","ActionName":"/_Host","RequestId":"0HNFO9J40F4CM:00000003","RequestPath":"/user/landing/USER212B","ConnectionId":"0HNFO9J40F4CM"}
[2025-09-20 09:52:04.522 -04:00 INF] Microsoft.AspNetCore.Mvc.RazorPages.Infrastructure.PageActionInvoker Executing an implicit handler method - ModelState is "Valid" {"EventId":{"Id":107,"Name":"ExecutingImplicitHandlerMethod"},"ActionId":"0701dfb2-10f4-407a-81ca-32fbb26ec05c","ActionName":"/_Host","RequestId":"0HNFO9J40F4CM:00000003","RequestPath":"/user/landing/USER212B","ConnectionId":"0HNFO9J40F4CM"}
[2025-09-20 09:52:04.530 -04:00 INF] Microsoft.AspNetCore.Mvc.RazorPages.Infrastructure.PageActionInvoker Executed an implicit handler method, returned result Microsoft.AspNetCore.Mvc.RazorPages.PageResult. {"EventId":{"Id":109,"Name":"ExecutedImplicitHandlerMethod"},"ActionId":"0701dfb2-10f4-407a-81ca-32fbb26ec05c","ActionName":"/_Host","RequestId":"0HNFO9J40F4CM:00000003","RequestPath":"/user/landing/USER212B","ConnectionId":"0HNFO9J40F4CM"}
[2025-09-20 09:52:04.593 -04:00 INF] NoorCanvas.Pages.UserLanding NOOR-DEBUG: [35a13da4] UserLanding OnInitialized - SessionToken: USER212B {"ActionId":"0701dfb2-10f4-407a-81ca-32fbb26ec05c","ActionName":"/_Host","RequestPath":"/user/landing/USER212B","ConnectionId":"0HNFO9J40F4CM"}
[2025-09-20 09:52:04.600 -04:00 INF] NoorCanvas.Pages.UserLanding NOOR-DEBUG: [35a13da4] Loading session info for token: USER212B {"ActionId":"0701dfb2-10f4-407a-81ca-32fbb26ec05c","ActionName":"/_Host","RequestPath":"/user/landing/USER212B","ConnectionId":"0HNFO9J40F4CM"}
[2025-09-20 09:52:04.610 -04:00 INF] NoorCanvas.Pages.UserLanding NOOR-DEBUG: [35a13da4] Calling session validation API for token: USER212B {"ActionId":"0701dfb2-10f4-407a-81ca-32fbb26ec05c","ActionName":"/_Host","RequestPath":"/user/landing/USER212B","ConnectionId":"0HNFO9J40F4CM"}
[2025-09-20 09:52:04.620 -04:00 INF] System.Net.Http.HttpClient.Default.LogicalHandler Start processing HTTP request GET https://localhost:9091/api/participant/session/USER212B/validate {"EventId":{"Id":100,"Name":"RequestPipelineStart"},"ActionId":"0701dfb2-10f4-407a-81ca-32fbb26ec05c","ActionName":"/_Host","RequestId":"0HNFO9J40F4CM:00000003","RequestPath":"/user/landing/USER212B","ConnectionId":"0HNFO9J40F4CM","Scope":["HTTP GET https://localhost:9091/api/participant/session/USER212B/validate"]}
[2025-09-20 09:52:04.632 -04:00 INF] System.Net.Http.HttpClient.Default.ClientHandler Sending HTTP request GET https://localhost:9091/api/participant/session/USER212B/validate {"EventId":{"Id":100,"Name":"RequestStart"},"ActionId":"0701dfb2-10f4-407a-81ca-32fbb26ec05c","ActionName":"/_Host","RequestId":"0HNFO9J40F4CM:00000003","RequestPath":"/user/landing/USER212B","ConnectionId":"0HNFO9J40F4CM","Scope":["HTTP GET https://localhost:9091/api/participant/session/USER212B/validate"]}
[2025-09-20 09:52:04.687 -04:00 INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/1.1 GET https://localhost:9091/api/participant/session/USER212B/validate - null null {"EventId":{"Id":1},"RequestId":"0HNFO9J40F4CN:00000001","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9J40F4CN"}
[2025-09-20 09:52:04.698 -04:00 INF] NoorCanvas.Services.DebugService NOOR_DEBUG: [HTTP_MIDDLEWARE] Request Started | CorrelationId: 07d894f5 | Data: {"Method":"GET","Path":{"Value":"/api/participant/session/USER212B/validate","HasValue":true},"QueryString":"","UserAgent":"","RemoteIP":"::1","ContentType":null,"ContentLength":null} {"RequestId":"0HNFO9J40F4CN:00000001","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9J40F4CN"}
[2025-09-20 09:52:04.705 -04:00 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware Executing endpoint 'NoorCanvas.Controllers.ParticipantController.ValidateSessionToken (NoorCanvas)' {"EventId":{"Name":"ExecutingEndpoint"},"RequestId":"0HNFO9J40F4CN:00000001","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9J40F4CN"}
[2025-09-20 09:52:04.716 -04:00 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Route matched with {action = "ValidateSessionToken", controller = "Participant", page = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ValidateSessionToken(System.String) on controller NoorCanvas.Controllers.ParticipantController (NoorCanvas). {"EventId":{"Id":102,"Name":"ControllerActionExecuting"},"ActionId":"ca428bad-2050-48c1-9968-0c30a4d70970","ActionName":"NoorCanvas.Controllers.ParticipantController.ValidateSessionToken (NoorCanvas)","RequestId":"0HNFO9J40F4CN:00000001","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9J40F4CN"}
[2025-09-20 09:52:04.735 -04:00 INF] NoorCanvas.Controllers.ParticipantController NOOR-PARTICIPANT-VALIDATE: [852cadef] Session validation request started {"ActionId":"ca428bad-2050-48c1-9968-0c30a4d70970","ActionName":"NoorCanvas.Controllers.ParticipantController.ValidateSessionToken (NoorCanvas)","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9J40F4CN"}
[2025-09-20 09:52:04.743 -04:00 INF] NoorCanvas.Controllers.ParticipantController NOOR-PARTICIPANT-VALIDATE: [852cadef] Token: USER212B, ClientIP: ::1, UserAgent: unknown {"ActionId":"ca428bad-2050-48c1-9968-0c30a4d70970","ActionName":"NoorCanvas.Controllers.ParticipantController.ValidateSessionToken (NoorCanvas)","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9J40F4CN"}
[2025-09-20 09:52:04.751 -04:00 INF] NoorCanvas.Controllers.ParticipantController NOOR-PARTICIPANT-VALIDATE: [852cadef] Request URL: https://localhost:9091/api/participant/session/USER212B/validate {"ActionId":"ca428bad-2050-48c1-9968-0c30a4d70970","ActionName":"NoorCanvas.Controllers.ParticipantController.ValidateSessionToken (NoorCanvas)","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9J40F4CN"}
[2025-09-20 09:52:04.760 -04:00 INF] NoorCanvas.Controllers.ParticipantController NOOR-PARTICIPANT-VALIDATE: [852cadef] Calling SimplifiedTokenService.ValidateTokenAsync for USER token {"ActionId":"ca428bad-2050-48c1-9968-0c30a4d70970","ActionName":"NoorCanvas.Controllers.ParticipantController.ValidateSessionToken (NoorCanvas)","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9J40F4CN"}
[2025-09-20 09:52:04.768 -04:00 INF] NoorCanvas.Services.SimplifiedTokenService NOOR-SIMPLIFIED: [8aee85a1] Validating USER token: USER212B {"ActionId":"ca428bad-2050-48c1-9968-0c30a4d70970","ActionName":"NoorCanvas.Controllers.ParticipantController.ValidateSessionToken (NoorCanvas)","RequestId":"0HNFO9J40F4CN:00000001","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9J40F4CN"}
[2025-09-20 09:52:04.858 -04:00 INF] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [canvas].[Sessions] AS [s] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"ActionId":"ca428bad-2050-48c1-9968-0c30a4d70970","ActionName":"NoorCanvas.Controllers.ParticipantController.ValidateSessionToken (NoorCanvas)","RequestId":"0HNFO9J40F4CN:00000001","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9J40F4CN"}
[2025-09-20 09:52:04.875 -04:00 INF] NoorCanvas.Services.SimplifiedTokenService NOOR-SIMPLIFIED: [8aee85a1] Total sessions in database: 1 {"ActionId":"ca428bad-2050-48c1-9968-0c30a4d70970","ActionName":"NoorCanvas.Controllers.ParticipantController.ValidateSessionToken (NoorCanvas)","RequestId":"0HNFO9J40F4CN:00000001","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9J40F4CN"}
[2025-09-20 09:52:04.933 -04:00 INF] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand (11ms) [Parameters=[@__token_0='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[SessionId], [s].[CreatedAt], [s].[Description], [s].[EndedAt], [s].[ExpiresAt], [s].[GroupId], [s].[HostGuid], [s].[HostToken], [s].[KSessionsId], [s].[MaxParticipants], [s].[ModifiedAt], [s].[ParticipantCount], [s].[StartedAt], [s].[Status], [s].[Title], [s].[TokenAccessCount], [s].[TokenCreatedByIp], [s].[TokenExpiresAt], [s].[TokenLastAccessedAt], [s].[UserToken]
FROM [canvas].[Sessions] AS [s]
WHERE [s].[UserToken] = @__token_0 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"ActionId":"ca428bad-2050-48c1-9968-0c30a4d70970","ActionName":"NoorCanvas.Controllers.ParticipantController.ValidateSessionToken (NoorCanvas)","RequestId":"0HNFO9J40F4CN:00000001","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9J40F4CN"}
[2025-09-20 09:52:05.016 -04:00 INF] NoorCanvas.Services.SimplifiedTokenService NOOR-SIMPLIFIED: [8aee85a1] Sessions matching token 'USER212B': 1 {"ActionId":"ca428bad-2050-48c1-9968-0c30a4d70970","ActionName":"NoorCanvas.Controllers.ParticipantController.ValidateSessionToken (NoorCanvas)","RequestId":"0HNFO9J40F4CN:00000001","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9J40F4CN"}
[2025-09-20 09:52:05.023 -04:00 INF] NoorCanvas.Services.SimplifiedTokenService NOOR-SIMPLIFIED: [8aee85a1] Matching session - ID: 1, KSessionsId: 212, Status: Active, ExpiresAt: NULL, HostToken: HOST212A, UserToken: USER212B {"ActionId":"ca428bad-2050-48c1-9968-0c30a4d70970","ActionName":"NoorCanvas.Controllers.ParticipantController.ValidateSessionToken (NoorCanvas)","RequestId":"0HNFO9J40F4CN:00000001","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9J40F4CN"}
[2025-09-20 09:52:05.050 -04:00 INF] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand (2ms) [Parameters=[@__token_0='?' (Size = 8)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[SessionId], [s].[CreatedAt], [s].[Description], [s].[EndedAt], [s].[ExpiresAt], [s].[GroupId], [s].[HostGuid], [s].[HostToken], [s].[KSessionsId], [s].[MaxParticipants], [s].[ModifiedAt], [s].[ParticipantCount], [s].[StartedAt], [s].[Status], [s].[Title], [s].[TokenAccessCount], [s].[TokenCreatedByIp], [s].[TokenExpiresAt], [s].[TokenLastAccessedAt], [s].[UserToken]
FROM [canvas].[Sessions] AS [s]
WHERE ([s].[ExpiresAt] IS NULL OR [s].[ExpiresAt] > GETUTCDATE()) AND [s].[Status] <> N'Expired' AND [s].[UserToken] = @__token_0 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"ActionId":"ca428bad-2050-48c1-9968-0c30a4d70970","ActionName":"NoorCanvas.Controllers.ParticipantController.ValidateSessionToken (NoorCanvas)","RequestId":"0HNFO9J40F4CN:00000001","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9J40F4CN"}
[2025-09-20 09:52:05.063 -04:00 INF] NoorCanvas.Services.SimplifiedTokenService NOOR-SIMPLIFIED: [8aee85a1] Token validation successful - Session 1 {"ActionId":"ca428bad-2050-48c1-9968-0c30a4d70970","ActionName":"NoorCanvas.Controllers.ParticipantController.ValidateSessionToken (NoorCanvas)","RequestId":"0HNFO9J40F4CN:00000001","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9J40F4CN"}
[2025-09-20 09:52:05.069 -04:00 INF] NoorCanvas.Controllers.ParticipantController NOOR-PARTICIPANT-VALIDATE: [852cadef] SimplifiedTokenService returned: Session 1 {"ActionId":"ca428bad-2050-48c1-9968-0c30a4d70970","ActionName":"NoorCanvas.Controllers.ParticipantController.ValidateSessionToken (NoorCanvas)","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9J40F4CN"}
[2025-09-20 09:52:05.076 -04:00 INF] NoorCanvas.Controllers.ParticipantController NOOR-PARTICIPANT-VALIDATE: [852cadef] Session found: SessionId=1, KSessionsId=212, Title=Test Session 212, Status=Active {"ActionId":"ca428bad-2050-48c1-9968-0c30a4d70970","ActionName":"NoorCanvas.Controllers.ParticipantController.ValidateSessionToken (NoorCanvas)","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9J40F4CN"}
[2025-09-20 09:52:05.088 -04:00 INF] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand (2ms) [Parameters=[@__session_SessionId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [canvas].[Participants] AS [p]
WHERE [p].[SessionId] = @__session_SessionId_0 {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"ActionId":"ca428bad-2050-48c1-9968-0c30a4d70970","ActionName":"NoorCanvas.Controllers.ParticipantController.ValidateSessionToken (NoorCanvas)","RequestId":"0HNFO9J40F4CN:00000001","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9J40F4CN"}
[2025-09-20 09:52:05.102 -04:00 INF] NoorCanvas.Controllers.ParticipantController NOOR-PARTICIPANT-VALIDATE: [852cadef] Validation successful! Returning response {"ActionId":"ca428bad-2050-48c1-9968-0c30a4d70970","ActionName":"NoorCanvas.Controllers.ParticipantController.ValidateSessionToken (NoorCanvas)","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9J40F4CN"}
[2025-09-20 09:52:05.110 -04:00 INF] NoorCanvas.Controllers.ParticipantController NOOR-PARTICIPANT-VALIDATE: [852cadef] Response: Valid=true, SessionId=1, Title=Test Session 212, Status=Active, ExpiresAt=null {"ActionId":"ca428bad-2050-48c1-9968-0c30a4d70970","ActionName":"NoorCanvas.Controllers.ParticipantController.ValidateSessionToken (NoorCanvas)","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9J40F4CN"}
[2025-09-20 09:52:05.118 -04:00 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor Executing OkObjectResult, writing value of type '<>f__AnonymousType41`7[[System.Boolean, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int64, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[<>f__AnonymousType42`10[[System.Int64, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.TimeSpan, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], NoorCanvas, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[<>f__AnonymousType43`3[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Nullable`1[[System.DateTime, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]], NoorCanvas, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'. {"EventId":{"Id":1,"Name":"ObjectResultExecuting"},"ActionId":"ca428bad-2050-48c1-9968-0c30a4d70970","ActionName":"NoorCanvas.Controllers.ParticipantController.ValidateSessionToken (NoorCanvas)","RequestId":"0HNFO9J40F4CN:00000001","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9J40F4CN"}
[2025-09-20 09:52:05.148 -04:00 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Executed action NoorCanvas.Controllers.ParticipantController.ValidateSessionToken (NoorCanvas) in 418.2262ms {"EventId":{"Id":105,"Name":"ActionExecuted"},"RequestId":"0HNFO9J40F4CN:00000001","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9J40F4CN"}
[2025-09-20 09:52:05.153 -04:00 INF] System.Net.Http.HttpClient.Default.ClientHandler Received HTTP response headers after 509.9018ms - 200 {"EventId":{"Id":101,"Name":"RequestEnd"},"HttpMethod":"GET","Uri":"https://localhost:9091/api/participant/session/USER212B/validate","ActionId":"0701dfb2-10f4-407a-81ca-32fbb26ec05c","ActionName":"/_Host","RequestId":"0HNFO9J40F4CM:00000003","RequestPath":"/user/landing/USER212B","ConnectionId":"0HNFO9J40F4CM","Scope":["HTTP GET https://localhost:9091/api/participant/session/USER212B/validate"]}
[2025-09-20 09:52:05.157 -04:00 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware Executed endpoint 'NoorCanvas.Controllers.ParticipantController.ValidateSessionToken (NoorCanvas)' {"EventId":{"Id":1,"Name":"ExecutedEndpoint"},"RequestId":"0HNFO9J40F4CN:00000001","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9J40F4CN"}
[2025-09-20 09:52:05.173 -04:00 INF] System.Net.Http.HttpClient.Default.LogicalHandler End processing HTTP request after 553.3329ms - 200 {"EventId":{"Id":101,"Name":"RequestPipelineEnd"},"HttpMethod":"GET","Uri":"https://localhost:9091/api/participant/session/USER212B/validate","ActionId":"0701dfb2-10f4-407a-81ca-32fbb26ec05c","ActionName":"/_Host","RequestId":"0HNFO9J40F4CM:00000003","RequestPath":"/user/landing/USER212B","ConnectionId":"0HNFO9J40F4CM","Scope":["HTTP GET https://localhost:9091/api/participant/session/USER212B/validate"]}
[2025-09-20 09:52:05.177 -04:00 INF] NoorCanvas.Services.DebugService NOOR_DEBUG: [HTTP_MIDDLEWARE] Request Completed | CorrelationId: 07d894f5 | Data: {"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"DurationMs":478} {"RequestId":"0HNFO9J40F4CN:00000001","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9J40F4CN"}
[2025-09-20 09:52:05.195 -04:00 INF] NoorCanvas.Services.DebugService NOOR_DEBUG: [PERFORMANCE] Operation Completed: HTTP_GET_/api/participant/session/USER212B/validate | Data: {"DurationMs":478.529,"Component":"HTTP_MIDDLEWARE"} {"RequestId":"0HNFO9J40F4CN:00000001","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9J40F4CN"}
[2025-09-20 09:52:05.202 -04:00 INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/1.1 GET https://localhost:9091/api/participant/session/USER212B/validate - 200 null application/json; charset=utf-8 514.3541ms {"EventId":{"Id":2},"RequestId":"0HNFO9J40F4CN:00000001","RequestPath":"/api/participant/session/USER212B/validate","ConnectionId":"0HNFO9J40F4CN"}
[2025-09-20 09:52:05.206 -04:00 INF] NoorCanvas.Pages.UserLanding NOOR-DEBUG: [35a13da4] Session validation API response: "OK" {"ActionId":"0701dfb2-10f4-407a-81ca-32fbb26ec05c","ActionName":"/_Host","RequestPath":"/user/landing/USER212B","ConnectionId":"0HNFO9J40F4CM"}
[2025-09-20 09:52:05.219 -04:00 INF] NoorCanvas.Pages.UserLanding NOOR-DEBUG: [35a13da4] Session validation response content: {"valid":true,"sessionId":1,"token":"USER212B","expiresAt":null,"session":{"sessionId":1,"title":"Test Session 212","description":"Test session for registration debugging","status":"Active","participantCount":0,"maxParticipants":null,"startedAt":"2025-09-20T08:30:22.6333333","createdAt":"2025-09-20T08:30:22.6333333","startTime":"2025-09-20T08:35:22.6333333","duration":"01:00:00"},"participant":{"joinUrl":"/session/waiting/USER212B","accessCount":0,"lastAccessedAt":null},"requestId":"852cadef"} {"ActionId":"0701dfb2-10f4-407a-81ca-32fbb26ec05c","ActionName":"/_Host","RequestPath":"/user/landing/USER212B","ConnectionId":"0HNFO9J40F4CM"}
[2025-09-20 09:52:05.235 -04:00 INF] NoorCanvas.Pages.UserLanding NOOR-DEBUG: [35a13da4] Session validation successful - SessionID: 1, Title: Test Session 212 {"ActionId":"0701dfb2-10f4-407a-81ca-32fbb26ec05c","ActionName":"/_Host","RequestPath":"/user/landing/USER212B","ConnectionId":"0HNFO9J40F4CM"}
[2025-09-20 09:52:05.242 -04:00 INF] NoorCanvas.Pages.UserLanding NOOR-DEBUG: [35a13da4] Updated Model.SessionName to: Test Session 212, SessionDescription to: Status: Active {"ActionId":"0701dfb2-10f4-407a-81ca-32fbb26ec05c","ActionName":"/_Host","RequestPath":"/user/landing/USER212B","ConnectionId":"0HNFO9J40F4CM"}
[2025-09-20 09:52:05.248 -04:00 INF] NoorCanvas.Pages.UserLanding NOOR-DEBUG: [35a13da4] URL token validated successfully - switching to registration panel {"ActionId":"0701dfb2-10f4-407a-81ca-32fbb26ec05c","ActionName":"/_Host","RequestPath":"/user/landing/USER212B","ConnectionId":"0HNFO9J40F4CM"}
[2025-09-20 09:52:05.253 -04:00 INF] NoorCanvas.Pages.UserLanding NOOR-DEBUG: [35a13da4] Loading countries dropdown after URL token validation... {"ActionId":"0701dfb2-10f4-407a-81ca-32fbb26ec05c","ActionName":"/_Host","RequestPath":"/user/landing/USER212B","ConnectionId":"0HNFO9J40F4CM"}
[2025-09-20 09:52:05.269 -04:00 INF] NoorCanvas.Pages.UserLanding COPILOT-DEBUG: [c2e08685] [COUNTRIES] Loading countries from API... {"ActionId":"0701dfb2-10f4-407a-81ca-32fbb26ec05c","ActionName":"/_Host","RequestPath":"/user/landing/USER212B","ConnectionId":"0HNFO9J40F4CM"}
[2025-09-20 09:52:05.276 -04:00 INF] NoorCanvas.Pages.UserLanding COPILOT-DEBUG: [c2e08685] [COUNTRIES] GET /api/host/countries?guid=USER212B {"ActionId":"0701dfb2-10f4-407a-81ca-32fbb26ec05c","ActionName":"/_Host","RequestPath":"/user/landing/USER212B","ConnectionId":"0HNFO9J40F4CM"}
[2025-09-20 09:52:05.281 -04:00 INF] System.Net.Http.HttpClient.default.LogicalHandler Start processing HTTP request GET https://localhost:9091/api/host/countries?guid=USER212B {"EventId":{"Id":100,"Name":"RequestPipelineStart"},"ActionId":"0701dfb2-10f4-407a-81ca-32fbb26ec05c","ActionName":"/_Host","RequestId":"0HNFO9J40F4CM:00000003","RequestPath":"/user/landing/USER212B","ConnectionId":"0HNFO9J40F4CM","Scope":["HTTP GET https://localhost:9091/api/host/countries?guid=USER212B"]}
[2025-09-20 09:52:05.291 -04:00 INF] System.Net.Http.HttpClient.default.ClientHandler Sending HTTP request GET https://localhost:9091/api/host/countries?guid=USER212B {"EventId":{"Id":100,"Name":"RequestStart"},"ActionId":"0701dfb2-10f4-407a-81ca-32fbb26ec05c","ActionName":"/_Host","RequestId":"0HNFO9J40F4CM:00000003","RequestPath":"/user/landing/USER212B","ConnectionId":"0HNFO9J40F4CM","Scope":["HTTP GET https://localhost:9091/api/host/countries?guid=USER212B"]}
[2025-09-20 09:52:05.303 -04:00 INF] Microsoft.AspNetCore.Hosting.Diagnostics Request starting HTTP/1.1 GET https://localhost:9091/api/host/countries?guid=USER212B - null null {"EventId":{"Id":1},"RequestId":"0HNFO9J40F4CO:00000001","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9J40F4CO"}
[2025-09-20 09:52:05.311 -04:00 INF] NoorCanvas.Services.DebugService NOOR_DEBUG: [HTTP_MIDDLEWARE] Request Started | CorrelationId: 3fa9aa22 | Data: {"Method":"GET","Path":{"Value":"/api/host/countries","HasValue":true},"QueryString":"?guid=USER212B","UserAgent":"NoorCanvas-BlazorServer","RemoteIP":"::1","ContentType":null,"ContentLength":null} {"RequestId":"0HNFO9J40F4CO:00000001","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9J40F4CO"}
[2025-09-20 09:52:05.317 -04:00 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware Executing endpoint 'NoorCanvas.Controllers.HostController.GetCountries (NoorCanvas)' {"EventId":{"Name":"ExecutingEndpoint"},"RequestId":"0HNFO9J40F4CO:00000001","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9J40F4CO"}
[2025-09-20 09:52:05.323 -04:00 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Route matched with {action = "GetCountries", controller = "Host", page = ""}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCountries(System.String) on controller NoorCanvas.Controllers.HostController (NoorCanvas). {"EventId":{"Id":102,"Name":"ControllerActionExecuting"},"ActionId":"a6c05142-eb16-4888-9905-d1c81a8f4d08","ActionName":"NoorCanvas.Controllers.HostController.GetCountries (NoorCanvas)","RequestId":"0HNFO9J40F4CO:00000001","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9J40F4CO"}
[2025-09-20 09:52:05.338 -04:00 INF] NoorCanvas.Controllers.HostController COPILOT-DEBUG: [b60d80b7] [COUNTRIES-API] Countries request started {"ActionId":"a6c05142-eb16-4888-9905-d1c81a8f4d08","ActionName":"NoorCanvas.Controllers.HostController.GetCountries (NoorCanvas)","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9J40F4CO"}
[2025-09-20 09:52:05.346 -04:00 INF] NoorCanvas.Controllers.HostController COPILOT-DEBUG: [b60d80b7] [COUNTRIES-API] Token: USER212B, ClientIP: ::1, UserAgent: NoorCanvas-BlazorServer {"ActionId":"a6c05142-eb16-4888-9905-d1c81a8f4d08","ActionName":"NoorCanvas.Controllers.HostController.GetCountries (NoorCanvas)","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9J40F4CO"}
[2025-09-20 09:52:05.353 -04:00 INF] NoorCanvas.Controllers.HostController COPILOT-DEBUG: [b60d80b7] [COUNTRIES-API] Querying Countries from KSESSIONS DbSet {"ActionId":"a6c05142-eb16-4888-9905-d1c81a8f4d08","ActionName":"NoorCanvas.Controllers.HostController.GetCountries (NoorCanvas)","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9J40F4CO"}
[2025-09-20 09:52:05.363 -04:00 INF] Microsoft.EntityFrameworkCore.Database.Command Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[CountryId] AS [CountryID], [c].[CountryName], [c].[ISO2], [c].[ISO3], [c].[IsActive]
FROM [dbo].[Countries] AS [c]
ORDER BY [c].[CountryName] {"EventId":{"Id":20101,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandExecuted"},"ActionId":"a6c05142-eb16-4888-9905-d1c81a8f4d08","ActionName":"NoorCanvas.Controllers.HostController.GetCountries (NoorCanvas)","RequestId":"0HNFO9J40F4CO:00000001","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9J40F4CO"}
[2025-09-20 09:52:05.379 -04:00 INF] NoorCanvas.Controllers.HostController COPILOT-DEBUG: [b60d80b7] [COUNTRIES-API] Countries query completed successfully {"ActionId":"a6c05142-eb16-4888-9905-d1c81a8f4d08","ActionName":"NoorCanvas.Controllers.HostController.GetCountries (NoorCanvas)","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9J40F4CO"}
[2025-09-20 09:52:05.385 -04:00 INF] NoorCanvas.Controllers.HostController COPILOT-DEBUG: [b60d80b7] [COUNTRIES-API] Loaded 245 countries from KSESSIONS database {"ActionId":"a6c05142-eb16-4888-9905-d1c81a8f4d08","ActionName":"NoorCanvas.Controllers.HostController.GetCountries (NoorCanvas)","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9J40F4CO"}
[2025-09-20 09:52:05.392 -04:00 INF] NoorCanvas.Controllers.HostController COPILOT-DEBUG: [b60d80b7] [COUNTRIES-API] Sample countries: Afghanistan (AF), Albania (AL), Algeria (DZ) {"ActionId":"a6c05142-eb16-4888-9905-d1c81a8f4d08","ActionName":"NoorCanvas.Controllers.HostController.GetCountries (NoorCanvas)","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9J40F4CO"}
[2025-09-20 09:52:05.398 -04:00 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ObjectResultExecutor Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[NoorCanvas.Controllers.CountryData, NoorCanvas, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'. {"EventId":{"Id":1,"Name":"ObjectResultExecuting"},"ActionId":"a6c05142-eb16-4888-9905-d1c81a8f4d08","ActionName":"NoorCanvas.Controllers.HostController.GetCountries (NoorCanvas)","RequestId":"0HNFO9J40F4CO:00000001","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9J40F4CO"}
[2025-09-20 09:52:05.409 -04:00 INF] Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker Executed action NoorCanvas.Controllers.HostController.GetCountries (NoorCanvas) in 72.7497ms {"EventId":{"Id":105,"Name":"ActionExecuted"},"RequestId":"0HNFO9J40F4CO:00000001","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9J40F4CO"}
[2025-09-20 09:52:05.410 -04:00 INF] System.Net.Http.HttpClient.default.ClientHandler Received HTTP response headers after 110.3536ms - 200 {"EventId":{"Id":101,"Name":"RequestEnd"},"HttpMethod":"GET","Uri":"https://localhost:9091/api/host/countries?guid=USER212B","ActionId":"0701dfb2-10f4-407a-81ca-32fbb26ec05c","ActionName":"/_Host","RequestId":"0HNFO9J40F4CM:00000003","RequestPath":"/user/landing/USER212B","ConnectionId":"0HNFO9J40F4CM","Scope":["HTTP GET https://localhost:9091/api/host/countries?guid=USER212B"]}
[2025-09-20 09:52:05.424 -04:00 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware Executed endpoint 'NoorCanvas.Controllers.HostController.GetCountries (NoorCanvas)' {"EventId":{"Id":1,"Name":"ExecutedEndpoint"},"RequestId":"0HNFO9J40F4CO:00000001","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9J40F4CO"}
[2025-09-20 09:52:05.430 -04:00 INF] System.Net.Http.HttpClient.default.LogicalHandler End processing HTTP request after 149.0763ms - 200 {"EventId":{"Id":101,"Name":"RequestPipelineEnd"},"HttpMethod":"GET","Uri":"https://localhost:9091/api/host/countries?guid=USER212B","ActionId":"0701dfb2-10f4-407a-81ca-32fbb26ec05c","ActionName":"/_Host","RequestId":"0HNFO9J40F4CM:00000003","RequestPath":"/user/landing/USER212B","ConnectionId":"0HNFO9J40F4CM","Scope":["HTTP GET https://localhost:9091/api/host/countries?guid=USER212B"]}
[2025-09-20 09:52:05.449 -04:00 INF] NoorCanvas.Services.DebugService NOOR_DEBUG: [HTTP_MIDDLEWARE] Request Completed | CorrelationId: 3fa9aa22 | Data: {"StatusCode":200,"ContentType":"application/json; charset=utf-8","ContentLength":null,"DurationMs":137} {"RequestId":"0HNFO9J40F4CO:00000001","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9J40F4CO"}
[2025-09-20 09:52:05.462 -04:00 INF] NoorCanvas.Services.DebugService NOOR_DEBUG: [PERFORMANCE] Operation Completed: HTTP_GET_/api/host/countries | Data: {"DurationMs":137.5637,"Component":"HTTP_MIDDLEWARE"} {"RequestId":"0HNFO9J40F4CO:00000001","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9J40F4CO"}
[2025-09-20 09:52:05.473 -04:00 INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/1.1 GET https://localhost:9091/api/host/countries?guid=USER212B - 200 null application/json; charset=utf-8 163.9488ms {"EventId":{"Id":2},"RequestId":"0HNFO9J40F4CO:00000001","RequestPath":"/api/host/countries","ConnectionId":"0HNFO9J40F4CO"}
[2025-09-20 09:52:05.474 -04:00 INF] NoorCanvas.Pages.UserLanding COPILOT-DEBUG: [c2e08685] [COUNTRIES] API response: "OK" {"ActionId":"0701dfb2-10f4-407a-81ca-32fbb26ec05c","ActionName":"/_Host","RequestPath":"/user/landing/USER212B","ConnectionId":"0HNFO9J40F4CM"}
[2025-09-20 09:52:05.494 -04:00 INF] NoorCanvas.Pages.UserLanding COPILOT-DEBUG: [c2e08685] [COUNTRIES] Loaded 245 countries successfully {"ActionId":"0701dfb2-10f4-407a-81ca-32fbb26ec05c","ActionName":"/_Host","RequestPath":"/user/landing/USER212B","ConnectionId":"0HNFO9J40F4CM"}
[2025-09-20 09:52:05.538 -04:00 INF] Microsoft.AspNetCore.Mvc.RazorPages.Infrastructure.PageActionInvoker Executed page /_Host in 1024.8229ms {"EventId":{"Id":104,"Name":"PageExecuted"},"RequestId":"0HNFO9J40F4CM:00000003","RequestPath":"/user/landing/USER212B","ConnectionId":"0HNFO9J40F4CM"}
[2025-09-20 09:52:05.547 -04:00 INF] Microsoft.AspNetCore.Routing.EndpointMiddleware Executed endpoint '/_Host' {"EventId":{"Id":1,"Name":"ExecutedEndpoint"},"RequestId":"0HNFO9J40F4CM:00000003","RequestPath":"/user/landing/USER212B","ConnectionId":"0HNFO9J40F4CM"}
[2025-09-20 09:52:05.555 -04:00 INF] NoorCanvas.Services.DebugService NOOR_DEBUG: [HTTP_MIDDLEWARE] Request Completed | CorrelationId: aeb7b08b | Data: {"StatusCode":200,"ContentType":"text/html; charset=utf-8","ContentLength":null,"DurationMs":1066} {"RequestId":"0HNFO9J40F4CM:00000003","RequestPath":"/user/landing/USER212B","ConnectionId":"0HNFO9J40F4CM"}
[2025-09-20 09:52:05.565 -04:00 INF] NoorCanvas.Services.DebugService NOOR_DEBUG: [PERFORMANCE] Slow Operation: HTTP_GET_/user/landing/USER212B | Data: {"DurationMs":1066.9181,"ThresholdMs":1000,"Component":"HTTP_MIDDLEWARE"} {"RequestId":"0HNFO9J40F4CM:00000003","RequestPath":"/user/landing/USER212B","ConnectionId":"0HNFO9J40F4CM"}
[2025-09-20 09:52:05.574 -04:00 INF] Microsoft.AspNetCore.Hosting.Diagnostics Request finished HTTP/1.1 GET https://localhost:9091/user/landing/USER212B - 200 null text/html; charset=utf-8 1096.9301ms {"EventId":{"Id":2},"RequestId":"0HNFO9J40F4CM:00000003","RequestPath":"/user/landing/USER212B","ConnectionId":"0HNFO9J40F4CM"}
